var doodle={};doodle.geom={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(q){var t=this;return function(){return t.apply(q,arguments)}};
doodle.utils=Object.create({},{hex_to_rgb:{enumerable:true,writable:false,configurable:false,value:function(q){if(typeof q==="string"){q=q[0]==="#"?q.slice(1):q;q=parseInt(q,16)}return[q>>16&255,q>>8&255,q&255]}},hex_to_rgb_str:{enumerable:true,writable:false,configurable:false,value:function(q,t){var i=doodle.utils;t=t===undefined?1:t;q=i.hex_to_rgb(q);return i.rgb_to_rgb_str(q[0],q[1],q[2],t)}},rgb_str_to_hex:{enumerable:true,writable:false,configurable:false,value:function(q){var t=doodle.utils;
q=t.rgb_str_to_rgb(q);return t.rgb_to_hex(parseInt(q[0],10),parseInt(q[1],10),parseInt(q[2],10))}},rgb_str_to_rgb:{enumerable:true,writable:false,configurable:false,value:function(){var q=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(t){t=t.trim().match(q);var i=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)];t=parseFloat(t[4]);typeof t==="number"&&!isNaN(t)&&i.push(t);return i}}()},rgb_to_hex:{enumerable:true,writable:false,configurable:false,value:function(q,
t,i){q=(i|t<<8|q<<16).toString(16);return"#"+String("000000"+q).slice(-6)}},rgb_to_rgb_str:{enumerable:true,writable:false,configurable:false,value:function(q,t,i,g){g=g===undefined?1:g;g=g<0?0:g>1?1:g;return g===1?"rgb("+q+","+t+","+i+")":"rgba("+q+","+t+","+i+","+g+")"}},get_element:{enumerable:true,writable:false,configurable:false,value:function(q){if(typeof q==="string"){q=q[0]==="#"?q.slice(1):q;return document.getElementById(q)}else return q&&q.tagName?q:null}},get_style_property:{enumerable:true,
writable:false,configurable:false,value:function(q,t,i){i=i===undefined?true:false;try{if(i&&document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(q,null)[t];else if(q.currentStyle)return q.currentStyle[t];else if(q.style)return q.style[t];else throw new ReferenceError("get_style_property: Cannot read property '"+t+"' of "+q+".");}catch(g){throw new ReferenceError("get_style_property: Cannot read property '"+t+"' of "+q+".");}}},get_element_property:{enumerable:true,
writable:false,configurable:false,value:function(q,t,i,g){i=i||false;var p;try{p=doodle.utils.get_style_property(q,t,g)}catch(j){p=undefined}if(p===undefined||p===null||p==="")p=q.getAttribute(t);if(i!==false)switch(i){case "int":p=parseInt(p,10);p=isNaN(p)?null:p;break;case "number":case "float":p=parseFloat(p);p=isNaN(p)?null:p;break;case "string":p=String(p);break;case "object":q={};p=q[t]=p;break;default:break}return p}},set_element_property:{enumerable:true,writable:false,configurable:false,
value:function(q,t,i,g){g=g===undefined?"css":g;switch(g){case "css":q.style[t]=i;break;case "html":q.setAttribute(t,i);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return i}},create_scene_path:{enumerable:true,writable:false,configurable:false,value:function(){return function q(t,i,g){i=i===undefined?[]:i;g=g===undefined?false:g;var p=t.children.length;g&&i.splice(0,i.length);if(p!==0)for(;p--;)q(t.children[p],i,false);i.push(t);return i}}()}});
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var q,t,i;doodle.Event=function(g,p,j){var r=Object.create(q),e=arguments.length,c,o;Object.defineProperties(r,t);Object.defineProperties(r,function(){var a,b,h,s=false,z=false,A=0,f=null,k=null,n=null,l=new Date,m=true,d=false,v=false;o=function(w,u,y){a=y?y:w.type;b=w.bubbles;h=w.cancelable;s=w.cancelBubble;z=w.defaultPrevented;A=w.eventPhase;if(u===false){f=w.currentTarget;k=w.target}else k=f=u;n=w.srcElement;l=w.timeStamp;m=w.returnValue;if(w.__cancel)d=true;if(w.__cancelNow)v=true};
return{type:{enumerable:true,configurable:false,get:function(){return a}},__setType:{enumerable:false,value:function(w){a=w}},bubbles:{enumerable:true,configurable:false,get:function(){return b}},cancelable:{enumerable:true,configurable:false,get:function(){return h}},cancelBubble:{enumerable:true,configurable:false,get:function(){return s},set:function(w){s=w}},__cancel:{enumerable:false,configurable:false,get:function(){return d}},__cancelNow:{enumerable:false,configurable:false,get:function(){return v}},
currentTarget:{enumerable:true,configurable:false,get:function(){return f}},__setCurrentTarget:{enumerable:false,value:function(w){f=w;return this}},target:{enumerable:true,configurable:false,get:function(){return k}},__setTarget:{enumerable:false,value:function(w){k=w;return this}},eventPhase:{enumerable:true,configurable:false,get:function(){return A}},__setEventPhase:{enumerable:false,value:function(w){A=w;return this}},srcElement:{enumerable:true,configurable:false,get:function(){return n}},timeStamp:{enumerable:true,
configurable:false,get:function(){return l}},returnValue:{enumerable:true,configurable:false,get:function(){return m}},initEvent:{enumerable:true,configurable:false,value:function(w,u,y){u=u===undefined?false:u;y=y===undefined?false:y;a=w;b=u;h=y;return this}},preventDefault:{enumerable:true,configurable:false,value:function(){z=true}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)d=true;else throw Error(this+".stopPropagation: Event can not be cancelled.");
}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)v=d=true;else throw Error(this+".stopImmediatePropagation: Event can not be cancelled.");}},__copyEventProperties:{enumerable:false,configurable:false,value:function(w,u,y){u=u===undefined?false:u;y=y===undefined?false:y;o(w,u,y);return this}}}}());if(e===1&&(typeof arguments[0]==="function"||i(arguments[0]))){c=arguments[0];g=undefined}if(c)typeof c==="function"?c.call(r):o(c,false,false);else r.initEvent(g,
p,j);return r};t={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}};q=Object.create({},{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},MOUSEDOWN:{enumerable:true,writable:false,configurable:false,value:1},MOUSEUP:{enumerable:true,writable:false,configurable:false,value:2},MOUSEOVER:{enumerable:true,
writable:false,configurable:false,value:4},MOUSEOUT:{enumerable:true,writable:false,configurable:false,value:8},MOUSEMOVE:{enumerable:true,writable:false,configurable:false,value:16},MOUSEDRAG:{enumerable:true,writable:false,configurable:false,value:32},CLICK:{enumerable:true,writable:false,configurable:false,value:64},DBLCLICK:{enumerable:true,writable:false,configurable:false,value:128},KEYDOWN:{enumerable:true,writable:false,configurable:false,value:256},KEYUP:{enumerable:true,writable:false,configurable:false,
value:512},KEYPRESS:{enumerable:true,writable:false,configurable:false,value:1024},DRAGDROP:{enumerable:true,writable:false,configurable:false,value:2048},FOCUS:{enumerable:true,writable:false,configurable:false,value:4096},BLUR:{enumerable:true,writable:false,configurable:false,value:8192},SELECT:{enumerable:true,writable:false,configurable:false,value:16384},CHANGE:{enumerable:true,writable:false,configurable:false,value:32768}});i=doodle.Event.isEvent=function(g){if(!g||typeof g!=="object"||typeof g.toString!==
"function")return false;else g=g.toString();return g==="[object Event]"||g==="[object UIEvent]"||g==="[object MouseEvent]"||g==="[object TouchEvent]"||g==="[object KeyboardEvent]"||g==="[object TextEvent]"||g==="[object WheelEvent]"}})();
(function(){var q,t=doodle.Event.isEvent;doodle.UIEvent=function(i,g,p,j,r){var e,c,o;if(t(arguments[0])){c=arguments[0];i=undefined;e=Object.create(doodle.Event(c))}else if(typeof arguments[0]==="function"){c=arguments[0];i=undefined;e=Object.create(doodle.Event(""))}else{g=g===undefined?false:g;p=p===undefined?false:p;e=Object.create(doodle.Event(i,g,p))}Object.defineProperties(e,q);Object.defineProperties(e,function(){var a=null,b=0,h=0,s=0,z=0,A=0,f=0,k=0,n=0;o=function(l){if(l.view!==undefined)a=
l.view;if(l.detail!==undefined)b=l.detail;if(l.which!==undefined)h=l.which;if(l.charCode!==undefined)s=l.charCode;if(l.keyCode!==undefined)z=l.keyCode;if(l.layerX!==undefined)A=l.layerX;if(l.layerY!==undefined)f=l.layerY;if(l.pageX!==undefined)k=l.pageX;if(l.pageY!==undefined)n=l.pageY};return{view:{enumerable:true,configurable:false,get:function(){return a}},detail:{enumerable:true,configurable:false,get:function(){return b}},which:{enumerable:true,configurable:false,get:function(){return h}},charCode:{enumerable:true,
configurable:false,get:function(){return s}},keyCode:{enumerable:true,configurable:false,get:function(){return z}},layerX:{enumerable:true,configurable:false,get:function(){return A}},layerY:{enumerable:true,configurable:false,get:function(){return f}},pageX:{enumerable:true,configurable:false,get:function(){return k}},pageY:{enumerable:true,configurable:false,get:function(){return n}},initUIEvent:{value:function(l,m,d,v,w){m=m===undefined?false:m;d=d===undefined?false:d;v=v===undefined?null:v;w=
w===undefined?0:w;a=v;b=w;this.initEvent(l,m,d);return this}},__copyUIEventProperties:{enumerable:false,configurable:false,value:function(l,m,d){m=m===undefined?false:m;d=d===undefined?false:d;o(l);return this.__copyEventProperties(l,m,d)}}}}());if(c)typeof c==="function"?c.call(e):o(c);else e.initUIEvent(i,g,p,j,r);return e};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}};doodle.UIEvent.isUIEvent=function(i){if(!i||typeof i!=="object"||
typeof i.toString!=="function")return false;else i=i.toString();return i==="[object UIEvent]"||i==="[object MouseEvent]"||i==="[object TouchEvent]"||i==="[object KeyboardEvent]"||i==="[object TextEvent]"||i==="[object WheelEvent]"}})();
(function(){var q,t=doodle.Event.isEvent;doodle.MouseEvent=function(i,g,p,j,r,e,c,o,a,b,h,s,z,A,f){var k,n,l;if(t(arguments[0])){n=arguments[0];i=undefined;k=Object.create(doodle.UIEvent(n))}else if(typeof arguments[0]==="function"){n=arguments[0];i=undefined;k=Object.create(doodle.UIEvent(""))}else{g=g===undefined?false:g;p=p===undefined?false:p;j=j===undefined?null:j;r=r===undefined?0:r;k=Object.create(doodle.UIEvent(i,g,p,j,r))}Object.defineProperties(k,q);Object.defineProperties(k,function(){var m=
0,d=0,v=0,w=0,u=0,y=0,F=0,G=0,C=false,H=false,J=false,L=false,O=0,P=null;l=function(E){m=E.x!==undefined?E.x:0;d=E.y!==undefined?E.y:0;v=E.offsetX!==undefined?E.offsetX:0;w=E.offsetY!==undefined?E.offsetY:0;if(E.screenX!==undefined)u=E.screenX;if(E.screenY!==undefined)y=E.screenY;if(E.clientX!==undefined)F=E.clientX;if(E.clientY!==undefined)G=E.clientY;if(E.ctrlKey!==undefined)C=E.ctrlKey;if(E.altKey!==undefined)H=E.altKey;if(E.shiftKey!==undefined)J=E.shiftKey;if(E.metaKey!==undefined)L=E.metaKey;
if(E.button!==undefined)O=E.button;if(E.relatedTarget!==undefined)P=E.relatedTarget};return{x:{enumerable:true,configurable:false,get:function(){return m}},y:{enumerable:true,configurable:false,get:function(){return d}},screenX:{enumerable:true,configurable:false,get:function(){return u}},screenY:{enumerable:true,configurable:false,get:function(){return y}},clientX:{enumerable:true,configurable:false,get:function(){return F}},clientY:{enumerable:true,configurable:false,get:function(){return G}},offsetX:{enumerable:true,
configurable:false,get:function(){return v}},offsetY:{enumerable:true,configurable:false,get:function(){return w}},ctrlKey:{enumerable:true,configurable:false,get:function(){return C}},altKey:{enumerable:true,configurable:false,get:function(){return H}},shiftKey:{enumerable:true,configurable:false,get:function(){return J}},metaKey:{enumerable:true,configurable:false,get:function(){return L}},button:{enumerable:true,configurable:false,get:function(){return O}},relatedTarget:{enumerable:true,configurable:false,
get:function(){return P}},initMouseEvent:{value:function(E,K,B,M,N,S,T,U,Q,V,x,D,I,R,W){K=K===undefined?false:K;B=B===undefined?false:B;M=M===undefined?null:M;N=N===undefined?0:N;S=S===undefined?0:S;T=T===undefined?0:T;U=U===undefined?0:U;Q=Q===undefined?0:Q;V=V===undefined?false:V;x=x===undefined?false:x;D=D===undefined?false:D;I=I===undefined?false:I;R=R===undefined?0:R;f=W===undefined?null:W;u=S;y=T;F=U;G=Q;C=V;H=x;J=D;L=I;O=R;P=W;return this.initUIEvent(E,K,B,M,N)}},getModifierState:{value:function(E){switch(E){case "Alt":return H;
case "Control":return C;case "Meta":return L;case "Shift":return J;default:return false}}},__copyMouseEventProperties:{enumerable:false,configurable:false,value:function(E,K,B){K=K===undefined?false:K;B=B===undefined?false:B;l(E);return this.__copyUIEventProperties(E,K,B)}}}}());if(n)typeof n==="function"?n.call(k):l(n);else k.initMouseEvent(i,g,p,j,r,e,c,o,a,b,h,s,z,A,f);return k};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}};doodle.MouseEvent.isMouseEvent=
function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i==="[object MouseEvent]"}})();
(function(){var q,t=doodle.Event.isEvent;doodle.TouchEvent=function(i,g,p,j,r,e,c,o,a,b,h,s,z,A,f,k,n,l){var m,d,v;if(t(arguments[0])){d=arguments[0];i=undefined;m=Object.create(doodle.UIEvent(d))}else if(typeof arguments[0]==="function"){d=arguments[0];i=undefined;m=Object.create(doodle.UIEvent(""))}else{g=g===undefined?false:g;p=p===undefined?false:p;j=j===undefined?null:j;r=r===undefined?0:r;m=Object.create(doodle.UIEvent(i,g,p,j,r))}Object.defineProperties(m,q);Object.defineProperties(m,function(){var w=
0,u=0,y=0,F=0,G=false,C=false,H=false,J=false,L=null,O=null,P=null,E=1,K=0;v=function(B){if(B.screenX!==undefined)w=B.screenX;if(B.screenY!==undefined)u=B.screenY;if(B.clientX!==undefined)y=B.clientX;if(B.clientY!==undefined)F=B.clientY;if(B.ctrlKey!==undefined)G=B.ctrlKey;if(B.altKey!==undefined)C=B.altKey;if(B.shiftKey!==undefined)H=B.shiftKey;if(B.metaKey!==undefined)J=B.metaKey;if(B.touches!==undefined)L=B.touches;if(B.targetTouches!==undefined)O=B.targetTouches;if(B.changedTouches!==undefined)P=
B.changedTouches;if(B.scale!==undefined)E=B.scale;if(B.rotation!==undefined)K=B.rotation};return{screenX:{enumerable:true,configurable:false,get:function(){return w}},screenY:{enumerable:true,configurable:false,get:function(){return u}},clientX:{enumerable:true,configurable:false,get:function(){return y}},clientY:{enumerable:true,configurable:false,get:function(){return F}},ctrlKey:{enumerable:true,configurable:false,get:function(){return G}},altKey:{enumerable:true,configurable:false,get:function(){return C}},
shiftKey:{enumerable:true,configurable:false,get:function(){return H}},metaKey:{enumerable:true,configurable:false,get:function(){return J}},touches:{enumerable:true,configurable:false,get:function(){return L}},targetTouches:{enumerable:true,configurable:false,get:function(){return O}},changedTouches:{enumerable:true,configurable:false,get:function(){return P}},scale:{enumerable:true,configurable:false,get:function(){return E}},rotation:{enumerable:true,configurable:false,get:function(){return K}},
initTouchEvent:{value:function(B,M,N,S,T,U,Q,V,x,D,I,R,W,X,Y,Z,$,aa){M=M===undefined?false:M;N=N===undefined?false:N;S=S===undefined?null:S;T=T===undefined?0:T;U=U===undefined?0:U;Q=Q===undefined?0:Q;V=V===undefined?0:V;x=x===undefined?0:x;D=D===undefined?false:D;I=I===undefined?false:I;R=R===undefined?false:R;W=W===undefined?false:W;X=X===undefined?null:X;Y=Y===undefined?null:Y;Z=Z===undefined?null:Z;$=$===undefined?1:$;aa=aa===undefined?0:aa;w=U;u=Q;y=V;F=x;G=D;C=I;H=R;J=W;L=X;O=Y;P=Z;E=$;K=aa;
this.initUIEvent(B,M,N,S,T);return this}},getModifierState:{value:function(B){switch(B){case "Alt":return C;case "Control":return G;case "Meta":return J;case "Shift":return H;default:return false}}},__copyTouchEventProperties:{enumerable:false,configurable:false,value:function(B,M,N){M=M===undefined?false:M;N=N===undefined?false:N;v(B);return this.__copyUIEventProperties(B,M,N)}}}}());if(d)typeof d==="function"?d.call(m):v(d);else m.initTouchEvent(i,g,p,j,r,e,c,o,a,b,h,s,z,A,f,k,n,l);return m};q=
{toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TouchEvent]"}}};doodle.TouchEvent.isTouchEvent=function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i==="[object TouchEvent]"}})();
(function(){var q,t=doodle.Event.isEvent;doodle.TextEvent=function(i,g,p,j,r,e){var c,o,a;if(t(arguments[0])){o=arguments[0];i=undefined;c=Object.create(doodle.UIEvent(o))}else if(typeof arguments[0]==="function"){o=arguments[0];i=undefined;c=Object.create(doodle.UIEvent(""))}else{g=g===undefined?false:g;p=p===undefined?false:p;j=j===undefined?null:j;c=Object.create(doodle.UIEvent(i,g,p,j))}Object.defineProperties(c,q);Object.defineProperties(c,function(){var b="",h=doodle.TextEvent.INPUT_METHOD_UNKNOWN;
a=function(s){if(s.data!==undefined)b=s.data;if(s.inputMode!==undefined)h=s.inputMode};return{data:{enumerable:true,configurable:false,get:function(){return b}},inputMode:{enumerable:true,configurable:false,get:function(){return h}},initTextEvent:{value:function(s,z,A,f,k,n){z=z===undefined?false:z;A=A===undefined?false:A;f=f===undefined?null:f;k=k===undefined?"":k;n=n===undefined?doodle.TextEvent.INPUT_METHOD_UNKNOWN:n;b=k;h=n;this.initUIEvent(s,z,A,f);return this}},__copyTextEventProperties:{enumerable:false,
configurable:false,value:function(s,z,A){z=z===undefined?false:z;A=A===undefined?false:A;a(s);return this.__copyUIEventProperties(s,z,A)}}}}());if(o)typeof o==="function"?o.call(c):a(o);else c.initTextEvent(i,g,p,j,r,e);return c};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}};doodle.TextEvent.isTextEvent=function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i==="[object TextEvent]"}})();
(function(){var q,t=doodle.Event.isEvent;doodle.KeyboardEvent=function(i,g,p,j,r,e,c,o){var a,b,h;if(t(arguments[0])){b=arguments[0];i=undefined;a=Object.create(doodle.UIEvent(b))}else if(typeof arguments[0]==="function"){b=arguments[0];i=undefined;a=Object.create(doodle.UIEvent(""))}else{g=g===undefined?false:g;p=p===undefined?false:p;j=j===undefined?null:j;a=Object.create(doodle.UIEvent(i,g,p,j))}Object.defineProperties(a,q);Object.defineProperties(a,function(){var s="",z=0,A=false,f=false,k=false,
n=false,l=false;h=function(m){if(m.keyIdentifier!==undefined)s=m.keyIdentifier;if(m.keyLocation!==undefined)z=m.keyLocation;if(m.repeat!==undefined)A=m.repeat;if(m.ctrlKey!==undefined)f=m.ctrlKey;if(m.altKey!==undefined)k=m.altKey;if(m.shiftKey!==undefined)n=m.shiftKey;if(m.metaKey!==undefined)l=m.metaKey;if(m.altGraphKey!==undefined)k=m.altGraphKey};return{keyIdentifier:{enumerable:true,configurable:false,get:function(){return s}},keyLocation:{enumerable:true,configurable:false,get:function(){return z}},
repeat:{enumerable:true,configurable:false,get:function(){return A}},ctrlKey:{enumerable:true,configurable:false,get:function(){return f}},altKey:{enumerable:true,configurable:false,get:function(){return k}},shiftKey:{enumerable:true,configurable:false,get:function(){return n}},metaKey:{enumerable:true,configurable:false,get:function(){return l}},altGraphKey:{enumerable:true,configurable:false,get:function(){return false}},initKeyboardEvent:{value:function(m,d,v,w,u,y,F,G){d=d===undefined?false:d;
v=v===undefined?false:v;w=w===undefined?null:w;u=u===undefined?"":u;y=y===undefined?0:y;F=F===undefined?"":F;G=G===undefined?false:G;s=u;z=y;A=G;F.split(" ").forEach(function(C){switch(C){case "Alt":k=true;break;case "Control":f=true;break;case "Meta":l=true;break;case "Shift":n=true;break}});this.initUIEvent(m,d,v,w);return this}},getModifierState:{value:function(m){switch(m){case "Alt":return k;case "Control":return f;case "Meta":return l;case "Shift":return n;default:return false}}},__copyKeyboardEventProperties:{enumerable:false,
configurable:false,value:function(m,d,v){d=d===undefined?false:d;v=v===undefined?false:v;h(m);return this.__copyUIEventProperties(m,d,v)}}}}());if(b)typeof b==="function"?b.call(a):h(b);else a.initKeyboardEvent(i,g,p,j,r,e,c,o);return a};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}};doodle.KeyboardEvent.isKeyboardEvent=function(i){if(!i||typeof i!=="object"||typeof i.toString!=="function")return false;else i=i.toString();return i===
"[object KeyboardEvent]"}})();
Object.defineProperties(doodle.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.TouchEvent,{TOUCH_START:{enumerable:true,writable:false,configurable:false,value:"touchstart"},TOUCH_MOVE:{enumerable:true,writable:false,configurable:false,value:"touchmove"},TOUCH_END:{enumerable:true,writable:false,configurable:false,value:"touchend"},TOUCH_CANCEL:{enumerable:true,writable:false,configurable:false,value:"touchcancel"}});
Object.defineProperties(doodle.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var q,t,i=Array(2),g={x:0,y:0},p,j=Math.cos,r=Math.sin,e=Math.sqrt;p=doodle.geom.Point=function(c,o){var a={},b=arguments.length;Object.defineProperties(a,q);Object.defineProperties(a,function(){var h=0,s=0;return{x:{enumerable:true,configurable:false,get:function(){return h},set:function(z){h=z}},y:{enumerable:true,configurable:false,get:function(){return s},set:function(z){s=z}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){i[0]=h;i[1]=s;return i}}}}());
switch(b){case 0:break;case 2:a.compose(c,o);break;case 1:b=arguments[0];c=undefined;if(typeof b==="function")b.call(a);else Array.isArray(b)?a.compose.apply(a,b):a.compose(b.x,b.y);break;default:}return a};q={length:{enumerable:true,configurable:false,get:function(){return t(g,this)}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+
this.y+")"}},compose:{enumerable:true,writable:false,configurable:false,value:function(c,o){this.x=c;this.y=o;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return p(this.x,this.y)}},equals:{enumerable:true,writable:false,configurable:false,value:function(c){return this&&c&&this.x===c.x&&this.y===c.y||!this&&!c}},add:{enumerable:true,writable:false,configurable:false,value:function(c){return p(this.x+c.x,this.y+c.y)}},subtract:{enumerable:true,writable:false,
configurable:false,value:function(c){return p(this.x-c.x,this.y-c.y)}},offset:{enumerable:true,writable:false,configurable:false,value:function(c,o){this.x+=c;this.y+=o;return this}},normalize:{enumerable:true,writable:false,configurable:false,value:function(c){this.x=this.x/this.length*c;this.y=this.y/this.length*c;return this}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(c,o,a){return p(c.x+(o.x-c.x)*a,c.y+(o.y-c.y)*a)}},polar:{enumerable:true,writable:false,configurable:false,
value:function(c,o){return p(c*j(o),c*r(o))}}};t=doodle.geom.Point.distance=function(c,o){var a=o.x-c.x,b=o.y-c.y;return e(a*a+b*b)};doodle.geom.Point.isPoint=function(c){return c&&typeof c.x==="number"&&typeof c.y==="number"}})();
(function(){var q,t=Array(6),i={x:null,y:null},g={a:null,b:null,c:null,d:null,tx:null,ty:null},p,j=doodle.geom.Point,r=Math.sin,e=Math.cos,c=Math.atan2,o=Math.tan;p=doodle.geom.Matrix=function(a,b,h,s,z,A){var f={},k=arguments.length;Object.defineProperties(f,q);Object.defineProperties(f,function(){var n=1,l=0,m=0,d=1,v=0,w=0;return{a:{enumerable:true,configurable:false,get:function(){return n},set:function(u){n=u}},b:{enumerable:true,configurable:false,get:function(){return l},set:function(u){l=
u}},c:{enumerable:true,configurable:false,get:function(){return m},set:function(u){m=u}},d:{enumerable:true,configurable:false,get:function(){return d},set:function(u){d=u}},tx:{enumerable:true,configurable:false,get:function(){return v},set:function(u){v=u}},ty:{enumerable:true,configurable:false,get:function(){return w},set:function(u){w=u}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){t[0]=n;t[1]=l;t[2]=m;t[3]=d;t[4]=v;t[5]=w;return t}}}}());switch(k){case 0:break;
case 6:f.compose(a,b,h,s,z,A);break;case 1:k=arguments[0];a=undefined;if(typeof k==="function")k.call(f);else Array.isArray(k)?f.compose.apply(f,k):f.compose(k.a,k.b,k.c,k.d,k.tx,k.ty);break;default:}return f};q={compose:{enumerable:true,writable:false,configurable:false,value:function(a,b,h,s,z,A){this.a=a;this.b=b;this.c=h;this.d=s;this.tx=z;this.ty=A;return this}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},toString:{enumerable:true,
writable:false,configurable:false,value:function(){return"(a="+this.a+", b="+this.b+", c="+this.c+", d="+this.d+", tx="+this.tx+", ty="+this.ty+")"}},equals:{enumerable:true,writable:false,configurable:false,value:function(a){return this&&a&&this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d&&this.tx===a.tx&&this.ty===a.ty||!this&&!a}},identity:{enumerable:true,writable:false,configurable:false,value:function(){this.a=1;this.c=this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:true,
writable:false,configurable:false,value:function(){return p(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:true,writable:false,configurable:false,value:function(a){return this.compose(this.a*a.a+this.c*a.b,this.b*a.a+this.d*a.b,this.a*a.c+this.c*a.d,this.b*a.c+this.d*a.d,this.a*a.tx+this.c*a.ty+this.tx,this.b*a.tx+this.d*a.ty+this.ty)}},rotate:{enumerable:true,writable:false,configurable:false,value:function(a){var b=e(a);a=r(a);g.a=b;g.b=a;g.c=-a;g.d=b;g.tx=0;g.ty=0;return this.multiply(g)}},
deltaRotate:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.tx,h=this.ty;this.rotate(a);this.tx=b;this.ty=h;return this}},rotation:{enumerable:true,configurable:false,get:function(){return c(this.b,this.a)},set:function(a){var b=e(a);a=r(a);this.compose(b,a,-a,b,this.tx,this.ty)}},scale:{enumerable:true,writable:false,configurable:false,value:function(a,b){g.a=a;g.b=0;g.c=0;g.d=b;g.tx=0;g.ty=0;return this.multiply(g)}},deltaScale:{enumerable:true,writable:false,configurable:false,
value:function(a,b){var h=this.tx,s=this.ty;this.scale(a,b);this.tx=h;this.ty=s;return this}},translate:{enumerable:true,writable:false,configurable:false,value:function(a,b){this.tx+=a;this.ty+=b;return this}},skew:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=o(a),s=o(b);g.a=1;g.b=s;g.c=h;g.d=1;g.tx=0;g.ty=0;return this.multiply(g)}},deltaSkew:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=this.tx,s=this.ty;this.skew(a,b);this.tx=h;this.ty=
s;return this}},add:{enumerable:true,writable:false,configurable:false,value:function(a){this.a+=a.a;this.b+=a.b;this.c+=a.c;this.d+=a.d;this.tx+=a.tx;this.ty+=a.ty;return this}},invert:{enumerable:true,writable:false,configurable:false,value:function(){var a=this.a*this.d-this.b*this.c;return this.compose(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.ty*this.c-this.d*this.tx)/a,-(this.ty*this.a-this.b*this.tx)/a)}},transformPoint:{enumerable:true,writable:false,configurable:false,value:function(a){return j(this.a*
a.x+this.c*a.y+this.tx,this.b*a.x+this.d*a.y+this.ty)}},__transformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var b=a.x,h=a.y;a.x=this.a*b+this.c*h+this.tx;a.y=this.b*b+this.d*h+this.ty;return a}},deltaTransformPoint:{enumerable:true,writable:false,configurable:false,value:function(a){return j(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)}},__deltaTransformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var b=a.x,h=a.y;a.x=this.a*b+this.c*
h;a.y=this.b*b+this.d*h;return a}},rotateAroundExternalPoint:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=e(b),s=r(b);g.a=h;g.b=s;g.c=-s;g.d=h;g.tx=0;g.ty=0;this.translate(-a.x,-a.y);i.x=g.a*this.tx+g.c*this.ty+g.tx;i.y=g.b*this.tx+g.d*this.ty+g.ty;this.tx=i.x;this.ty=i.y;return this.multiply(g).translate(a.x,a.y)}},rotateAroundInternalPoint:{enumerable:true,writable:false,configurable:false,value:function(a,b){i.x=this.a*a.x+this.c*a.y+this.tx;i.y=this.b*a.x+this.d*
a.y+this.ty;return this.rotateAroundExternalPoint(i,b)}},matchInternalPointWithExternal:{enumerable:true,writable:false,configurable:false,value:function(a,b){i.x=this.a*a.x+this.c*a.y+this.tx;i.y=this.b*a.x+this.d*a.y+this.ty;return this.translate(b.x-i.x,b.y-i.y)}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(a,b){this.a+=(a.a-this.a)*b;this.b+=(a.b-this.b)*b;this.c+=(a.c-this.c)*b;this.d+=(a.d-this.d)*b;this.tx+=(a.tx-this.tx)*b;this.ty+=(a.ty-this.ty)*b;return this}}};
doodle.geom.Matrix.isMatrix=function(a){return a!==undefined&&a!==null&&typeof a.a==="number"&&typeof a.b==="number"&&typeof a.c==="number"&&typeof a.d==="number"&&typeof a.tx==="number"&&typeof a.ty==="number"}})();
(function(){var q,t=Array(4),i,g=Math.max,p=Math.min;i=doodle.geom.Rectangle=function(j,r,e,c){var o={},a=arguments.length;Object.defineProperties(o,q);Object.defineProperties(o,function(){var b=0,h=0,s=0,z=0;return{x:{enumerable:true,configurable:false,get:function(){return b},set:function(A){b=A}},y:{enumerable:true,configurable:false,get:function(){return h},set:function(A){h=A}},width:{enumerable:true,configurable:false,get:function(){return s},set:function(A){s=A}},height:{enumerable:true,configurable:false,
get:function(){return z},set:function(A){z=A}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){t[0]=b;t[1]=h;t[2]=s;t[3]=z;return t}}}}());switch(a){case 0:break;case 4:o.compose(j,r,e,c);break;case 1:a=arguments[0];j=undefined;if(typeof a==="function")a.call(o);else Array.isArray(a)?o.compose.apply(o,a):o.compose(a.x,a.y,a.width,a.height);break;default:}return o};q={top:{enumerable:true,configurable:false,get:function(){return this.y},set:function(j){this.y=j;this.height-=
j}},right:{enumerable:true,configurable:false,get:function(){return this.x+this.width},set:function(j){this.width=j-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(j){this.height=j-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(j){this.x=j;this.width-=j}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+
")"}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},compose:{enumerable:true,writable:false,configurable:false,value:function(j,r,e,c){this.x=j;this.y=r;this.width=e;this.height=c;return this}},__compose:{enumerable:false,writable:false,configurable:false,value:function(j){this.compose.apply(this,j.__toArray());return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return i(this.x,this.y,this.width,this.height)}},
offset:{enumerable:true,writable:false,configurable:false,value:function(j,r){this.x+=j;this.y+=r;return this}},inflate:{enumerable:true,writable:false,configurable:false,value:function(j,r){this.x-=j;this.width+=2*j;this.y-=r;this.height+=2*r;return this}},equals:{enumerable:true,writable:false,configurable:false,value:function(j){return this.x===j.x&&this.y===j.y&&this.width===j.width&&this.height===j.height}},isEmpty:{enumerable:true,writable:false,configurable:false,value:function(){return this.width>=
0||this.height>=0}},contains:{enumerable:false,writable:false,configurable:false,value:function(j,r){return j>=this.left&&j<=this.right&&r>=this.top&&r<=this.bottom}},containsPoint:{enumerable:true,writable:false,configurable:false,value:function(j){return this.contains(j.x,j.y)}},containsRect:{enumerable:true,writable:false,configurable:false,value:function(j){return this.contains(j.x,j.y)&&this.contains(j.right,j.y)&&this.contains(j.right,j.bottom)&&this.contains(j.x,j.bottom)}},intersects:{enumerable:true,
writable:false,configurable:false,value:function(j){return this.contains(j.x,j.y)||this.contains(j.right,j.y)||this.contains(j.right,j.bottom)||this.contains(j.x,j.bottom)}},intersection:{enumerable:true,writable:false,configurable:false,value:function(j){var r=i(0,0,0,0);if(this.intersects(j)){r.left=g(this.left,j.left);r.top=g(this.top,j.top);r.right=p(this.right,j.right);r.bottom=p(this.bottom,j.bottom)}return r}},__intersection:{enumerable:false,writable:false,configurable:false,value:function(j){if(this.intersects(j)){this.left=
g(this.left,j.left);this.top=g(this.top,j.top);this.right=p(this.right,j.right);this.bottom=p(this.bottom,j.bottom)}return this}},union:{enumerable:true,writable:false,configurable:false,value:function(j){var r=i(0,0,0,0);r.left=p(this.left,j.left);r.top=p(this.top,j.top);r.right=g(this.right,j.right);r.bottom=g(this.bottom,j.bottom);return r}},__union:{enumerable:false,writable:false,configurable:false,value:function(j){var r=p(this.left,j.left),e=p(this.top,j.top),c=g(this.right,j.right);j=g(this.bottom,
j.bottom);this.left=r;this.top=e;this.right=c;this.bottom=j;return this}}};doodle.geom.Rectangle.isRect=function(j){return typeof j.x==="number"&&typeof j.y==="number"&&typeof j.width==="number"&&typeof j.height==="number"&&typeof j.top==="number"&&typeof j.bottom==="number"&&typeof j.left==="number"&&typeof j.right==="number"}})();
(function(){var q,t,i,g=doodle.Event.CAPTURING_PHASE,p=doodle.Event.AT_TARGET,j=doodle.Event.BUBBLING_PHASE,r=Array.prototype.indexOf,e=Array.prototype.splice;doodle.EventDispatcher=function(c){var o={};Object.defineProperties(o,q);Object.defineProperties(o,{eventListeners:function(){var a={};return{enumerable:true,configurable:false,get:function(){return a}}}()});typeof c==="function"&&c.call(o);return o};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},
modify:{enumerable:true,writable:false,configurable:false,value:function(c){c.call(this);return this}},addEventListener:{enumerable:true,writable:false,configurable:false,value:function(c,o,a){a=a===undefined?false:a;var b=this.eventListeners;b.hasOwnProperty(c)||(b[c]={capture:[],bubble:[]});b[c][a?"capture":"bubble"].push(o);t.indexOf(this)===-1&&t.push(this)}},removeEventListener:{enumerable:true,writable:false,configurable:false,value:function(c,o,a){a=a===undefined?false:a;var b=this.eventListeners,
h=b.hasOwnProperty(c)?b[c]:false;if(h){a=h[a?"capture":"bubble"];e.call(a,r.call(a,o),1);h.capture.length===0&&h.bubble.length===0&&delete b[c];if(Object.keys(b).length===0){c=t;e.call(c,r.call(c,this),1)}}}},handleEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var o=c.eventPhase===g?"capture":"bubble",a=this.eventListeners[c.type],b=0,h;if((a=a&&a[o])&&a.length>0){c.__setCurrentTarget(this);b=a.length;for(h=0;h<b;h+=1){o=a[h].call(this,c);if(o===false||c.returnValue===
false)c.__cancel||c.stopPropagation();if(c.__cancelNow)break}}return b>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var o,a=c.type,b=Object.prototype.hasOwnProperty,h=b.call(this.eventListeners,a),s,z=[];if(c.__cancel)return false;c.target||c.__setTarget(this);o=c.target;for(s=o.parent||null;s;){h||(h=b.call(s.eventListeners,a));z.push(s);s=s.parent}if(!h)return true;c.__setEventPhase(g);for(b=a=z.length;b--;){z[b].handleEvent(c);if(c.__cancel)return true}c.__setEventPhase(p);
o.handleEvent(c);if(c.__cancel)return true;if(!c.bubbles||c.cancelBubble)return true;c.__setEventPhase(j);for(b=0;b<a;b+=1){z[b].handleEvent(c);if(c.__cancel||c.cancelBubble)return true}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(c){var o=c.type,a=Object.prototype.hasOwnProperty,b=t,h=b.length;if(c.__cancel)throw Error(this+".broadcastEvent: Can not dispatch a cancelled event.");for(c.target||c.__setTarget(this);h--;){a.call(b[h].eventListeners,o)&&
b[h].handleEvent(c);if(c.__cancel)break}return true}},hasEventListener:{enumerable:true,writable:false,configurable:false,value:function(c){return this.eventListeners.hasOwnProperty(c)}},willTrigger:{enumerable:true,writable:false,configurable:false,value:function(c){if(this.eventListeners.hasOwnProperty(c))return true;for(var o=this.children,a=o?o.length:0;a--;)if(o[a].willTrigger(c))return true;return false}}};t=doodle.EventDispatcher.dispatcher_queue=[];i=doodle.EventDispatcher.isEventDispatcher=
function(c){if(!c||typeof c!=="object"||typeof c.toString!=="function")return false;return c.toString()==="[object EventDispatcher]"};doodle.EventDispatcher.inheritsEventDispatcher=function(c){for(;c;)if(i(c))return true;else{if(typeof c!=="object")return false;c=Object.getPrototypeOf(c)}return false}})();
(function(){var q=0,t,i,g=doodle.Event(doodle.Event.ADDED,true),p=doodle.Event(doodle.Event.REMOVED,true),j=doodle.geom.Point,r=doodle.geom.Matrix,e=doodle.geom.Rectangle,c=doodle.utils.create_scene_path,o=Math.PI;doodle.Node=function(a){var b=Object.create(doodle.EventDispatcher());Object.defineProperties(b,t);Object.defineProperties(b,{id:function(){var h=typeof a==="string"?a:"node"+String("000"+q).slice(-3);q+=1;return{enumerable:true,configurable:true,get:function(){return h},set:function(s){h=
s}}}(),root:function(){var h=null;return{enumerable:true,configurable:true,get:function(){return h},set:function(s){h=s}}}(),parent:function(){var h=null;return{enumerable:true,configurable:true,get:function(){return h},set:function(s){h=s}}}(),children:function(){var h=[];return{enumerable:true,configurable:false,get:function(){return h}}}(),transform:function(){var h=r();return{enumerable:true,configurable:false,get:function(){return h},set:function(s){h=s}}}(),visible:function(){var h=true;return{enumerable:true,
configurable:true,get:function(){return h},set:function(s){h=s}}}(),alpha:function(){var h=1;return{enumerable:true,configurable:true,get:function(){return h},set:function(s){h=s>1?1:s<0?0:s}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(h){return this.__getBounds(h).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var h=e();return function(s){for(var z=null,A,f=this.children,k=f.length;k--;){A=f[k].__getBounds(s);if(A!==null)if(z===
null)z=h.__compose(A);else z.__union(A)}return z}}()}});if(typeof a==="function"){a.call(b);a=undefined}return b};t={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(a){this.transform.tx=a}},y:{enumerable:true,configurable:false,get:function(){return this.transform.ty},set:function(a){this.transform.ty=a}},rotate:{enumerable:true,configurable:false,value:function(a){this.transform.rotate(a*o/180)}},rotation:{enumerable:true,configurable:true,get:function(){return this.transform.rotation*
180/o},set:function(a){this.transform.rotation=a*o/180}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(a){this.transform.a=a}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(a){this.transform.d=a}},context:{enumerable:true,configurable:true,get:function(){for(var a=this.parent;a;){if(a.context)return a.context;a=a.parent}return null}},__allTransforms:{enumerable:false,configurable:false,get:function(){var a=
r();return function(){var b=this.parent;for(a.compose.apply(a,this.transform.__toArray());b;){a.multiply(b.transform);b=b.parent}return a}}()},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=this.children,s=this.root,z=a.parent;if(h.indexOf(a)!==-1)return false;z!==null&&z!==this&&a.parent.removeChild(a);a.parent=this;h.splice(b,0,a);if(s&&a.root!==s){s.__sortAllChildren();
h=c(a,[]);for(z=h.length;z--;){a=h[z];a.root=s;a.dispatchEvent(g.__setTarget(null))}}return a}},addChild:{enumerable:true,writable:false,configurable:false,value:function(a){return this.addChildAt(a,this.children.length)}},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.children,h=b[a],s=this.root,z=c(h,[]),A=z.length,f=A;if(s)for(;A--;)z[A].dispatchEvent(p.__setTarget(null));b.splice(a,1);for(h.parent=null;f--;)z[f].root=null;s&&s.__sortAllChildren()}},
removeChild:{enumerable:false,writable:false,configurable:false,value:function(a){this.removeChildAt(this.children.indexOf(a))}},removeChildById:{enumerable:true,writable:false,configurable:false,value:function(a){this.removeChild(this.getChildById(a))}},removeAllChildren:{enumerable:true,writable:false,configurable:false,value:function(){for(var a=this.children.length;a--;)this.removeChildAt(a)}},getChildById:{enumerable:true,writable:false,configurable:false,value:function(a){for(var b=this.children,
h=b.length,s=0;s<h;s++)if(b[s].id===a)return b[s];return null}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=this.children,s=h.indexOf(a);h.splice(s,1);h.splice(b,0,a)}},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=this.children;h[a]=h.splice(b,1,h[a])[0]}},swapChildren:{enumerable:true,writable:false,configurable:false,value:function(a,b){var h=this.children;this.swapChildrenAt(h.indexOf(a),h.indexOf(b))}},
swapDepths:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.parent,h;h=b.children;b.swapChildrenAt(h.indexOf(this),h.indexOf(a))}},swapDepthAt:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.parent;b.swapChildrenAt(a,b.children.indexOf(this))}},contains:{enumerable:true,writable:false,configurable:false,value:function(a){return c(this,[]).indexOf(a)!==-1?true:false}},localToGlobal:{enumerable:true,writable:false,configurable:false,value:function(a){var b=
this.parent;for(a=this.transform.transformPoint(a);b;){b.transform.__transformPoint(a);b=b.parent}return a}},__localToGlobal:{enumerable:false,writable:false,configurable:false,value:function(a){for(var b=this;b;){b.transform.__transformPoint(a);b=b.parent}return a}},globalToLocal:{enumerable:true,writable:false,configurable:false,value:function(a){var b={x:0,y:0};this.__localToGlobal(b);return j(a.x-b.x,a.y-b.y)}},__globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(a){var b=
{x:0,y:0};this.__localToGlobal(b);a.x-=b.x;a.y-=b.y;return a}}};i=doodle.Node.isNode=function(a){if(!a||typeof a!=="object"||typeof a.toString!=="function")return false;return a.toString()==="[object Node]"};doodle.Node.inheritsNode=function(a){for(;a;)if(i(a))return true;else{if(typeof a!=="object")return false;a=Object.getPrototypeOf(a)}return false}})();
(function(){var q,t=doodle.utils.hex_to_rgb_str,i=doodle.utils.get_element,g=doodle.Event,p=doodle.GradientType.LINEAR,j=doodle.GradientType.RADIAL;doodle.Graphics=function(r,e){var c={},o=this,a=0,b=0,h=1,s=doodle.LineCap.BUTT,z=doodle.LineJoin.MITER,A=10;Object.defineProperties(c,q);Object.defineProperties(c,{lineWidth:{enumerable:true,configurable:false,get:function(){return h}},lineCap:{enumerable:true,configurable:false,get:function(){return s}},lineJoin:{enumerable:true,configurable:false,get:function(){return z}},
lineMiter:{enumerable:true,configurable:false,get:function(){return A}},draw:{enumerable:false,writable:false,configurable:false,value:function(f){r.push(f)}},clear:{enumerable:false,writable:false,configurable:false,value:function(){r.length=0;o.width=0;o.height=0;a=b=e.min_x=e.min_y=e.max_x=e.max_y=0}},rect:{enumerable:false,writable:false,configurable:false,value:function(f,k,n,l){e.min_x=Math.min(0,f,e.min_x);e.min_y=Math.min(0,k,e.min_y);e.max_x=Math.max(0,f,f+n,e.max_x);e.max_y=Math.max(0,k,
k+l,e.max_y);o.width=-e.min_x+e.max_x;o.height=-e.min_y+e.max_y;r.push(function(m){m.beginPath();m.rect(f,k,n,l);m.closePath();m.stroke()})}},circle:{enumerable:false,writable:false,configurable:false,value:function(f,k,n){e.min_x=Math.min(0,-n+f,e.min_x);e.min_y=Math.min(0,-n+k,e.min_y);e.max_x=Math.max(0,f,f+n,e.max_x);e.max_y=Math.max(0,k,k+n,e.max_y);o.width=-e.min_x+e.max_x;o.height=-e.min_y+e.max_y;r.push(function(l){l.beginPath();l.arc(f,k,n,0,6.283185307179586,true);l.closePath();l.stroke()})}},
ellipse:{enumerable:false,writable:false,configurable:false,value:function(f,k,n,l){l=l===undefined?n:l;var m=n/2,d=l/2,v=0.5522847498*m,w=0.5522847498*d;e.min_x=Math.min(0,-m+f,e.min_x);e.min_y=Math.min(0,-d+k,e.min_y);e.max_x=Math.max(0,f,f+m,e.max_x);e.max_y=Math.max(0,k,k+d,e.max_y);o.width=-e.min_x+e.max_x;o.height=-e.min_y+e.max_y;r.push(function(u){u.beginPath();u.moveTo(f+m,k);u.bezierCurveTo(f+m,k-w,f+v,k-d,f,k-d);u.bezierCurveTo(f-v,k-d,f-m,k-w,f-m,k);u.bezierCurveTo(f-m,k+w,f-v,k+d,f,k+
d);u.bezierCurveTo(f+v,k+d,f+m,k+w,f+m,k);u.closePath();u.stroke()})}},roundRect:{enumerable:false,writable:false,configurable:false,value:function(f,k,n,l,m,d){m=m===undefined?0:m;d=d===undefined?0:d;var v=f+n,w=v-m,u=f+m,y=k+l,F=y-d,G=k+d;e.min_x=Math.min(0,f,e.min_x);e.min_y=Math.min(0,k,e.min_y);e.max_x=Math.max(0,f,f+n,e.max_x);e.max_y=Math.max(0,k,k+l,e.max_y);o.width=-e.min_x+e.max_x;o.height=-e.min_y+e.max_y;r.push(function(C){C.beginPath();C.moveTo(u,k);C.beginPath();C.lineTo(w,k);C.quadraticCurveTo(v,
k,v,G);C.lineTo(v,F);C.quadraticCurveTo(v,y,w,y);C.lineTo(u,y);C.quadraticCurveTo(f,y,f,F);C.lineTo(f,G);C.quadraticCurveTo(f,k,u,k);C.closePath();C.stroke()})}},moveTo:{enumerable:false,writable:false,configurable:false,value:function(f,k){r.push(function(n){n.moveTo(f,k)});a=f;b=k}},lineTo:{enumerable:false,writable:false,configurable:false,value:function(f,k){e.min_x=Math.min(0,f,a,e.min_x);e.min_y=Math.min(0,k,b,e.min_y);e.max_x=Math.max(0,f,a,e.max_x);e.max_y=Math.max(0,k,b,e.max_y);o.width=
e.max_x-e.min_x;o.height=e.max_y-e.min_y;r.push(function(n){n.lineTo(f,k)});a=f;b=k}},curveTo:{enumerable:false,writable:false,configurable:false,value:function(f,k){var n=a,l=b,m=f.x,d=f.y,v=k.x,w=k.y,u,y=0,F=0;u=(n-m)/(n-2*m+v);if(0<=u&&u<=1)y=(1-u)*(1-u)*n+2*(1-u)*u*m+u*u*v;u=(l-d)/(l-2*d+w);if(0<=u&&u<=1)F=(1-u)*(1-u)*l+2*(1-u)*u*d+u*u*w;e.min_x=Math.min(0,n,y,v,e.min_x);e.min_y=Math.min(0,l,F,w,e.min_y);e.max_x=Math.max(0,n,y,v,e.max_x);e.max_y=Math.max(0,l,F,w,e.max_y);o.width=-e.min_x+e.max_x;
o.height=-e.min_y+e.max_y;r.push(function(G){G.quadraticCurveTo(m,d,v,w)});a=v;b=w}},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(f,k,n){var l=Math.pow,m=Math.max,d=Math.min,v=a,w=b,u=f.x,y=f.y,F=k.x,G=k.y,C=n.x,H=n.y,J,L=n=k=0,O=0;for(f=0.1;f<1;f+=0.1){J=l(1-f,3)*v+3*l(1-f,2)*f*u+3*l(1-f,1)*l(f,2)*F+l(f,3)*C;if(J>k)k=J;if(J<n)n=J;J=l(1-f,3)*w+3*l(1-f,2)*f*y+3*l(1-f,1)*l(f,2)*G+l(f,3)*H;if(J>L)L=J;if(J<O)O=J}e.min_x=d(0,v,n,C,e.min_x);e.min_y=d(0,w,O,H,e.min_y);
e.max_x=m(0,v,k,C,e.max_x);e.max_y=m(0,w,L,H,e.max_y);o.width=-e.min_x+e.max_x;o.height=-e.min_y+e.max_y;r.push(function(P){P.bezierCurveTo(u,y,F,G,C,H)});a=C;b=H}},beginFill:{enumerable:false,writable:false,configurable:false,value:function(f,k){k=k===undefined?1:k;r.push(function(n){n.fillStyle=t(f,k)})}},beginGradientFill:{enumerable:true,writable:false,configurable:false,value:function(f,k,n,l,m,d){r.push(function(v){var w=doodle.utils.hex_to_rgb_str,u,y=l.length,F=0;if(f===p)u=v.createLinearGradient(k.x,
k.y,n.x,n.y);else if(f===j)u=v.createRadialGradient(k.x,k.y,k.radius,n.x,n.y,n.radius);else throw new TypeError(o+".graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;F<y;F+=1)u.addColorStop(l[F],w(m[F],d[F]));v.fillStyle=u})}},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(f,k){var n=null,l;l=doodle.Pattern;k=k===undefined?l.REPEAT:k;if(k!==l.REPEAT&&k!==l.NO_REPEAT&&k!==l.REPEAT_X&&k!==l.REPEAT_Y)throw new SyntaxError(o+
".graphics.beginPatternFill(image, *repeat*): Invalid pattern repeat type.");if(typeof f==="string")if(f[0]==="#")f=i(f,o+".graphics..beginPatternFill");else(function(){var m=encodeURI(f);f=new Image;f.src=m})();if(f.complete)n=f;else{f.onload=function(){n=f;o.dispatchEvent(g(g.LOAD))};l=function(){throw new URIError(o+".graphics.beginPatternFill(*image*,repeat): Unable to load "+f.src);};f.onerror=l;f.onabort=l}r.push(function(m){m.fillStyle=n?m.createPattern(n,k):"rgba(0,0,0,0)"})}},lineStyle:{enumerable:true,
writable:false,configurable:false,value:function(f,k,n,l,m,d){f=f===undefined?1:f;k=k===undefined?"#000000":k;n=n===undefined?1:n;l=l===undefined?doodle.LineCap.BUTT:l;m=m===undefined?doodle.LineJoin.MITER:m;d=d===undefined?10:d;h=f;z=m;s=l;A=d;if(typeof k==="string"||typeof k==="number")k=t(k,n);else throw new TypeError(o+".graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");r.push(function(v){v.lineWidth=h;v.strokeStyle=k;v.lineCap=s;v.lineJoin=z;v.miterLimit=
A})}},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(f){f.beginPath();f.moveTo(a,b)})}},closePath:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(f){f.closePath();f.stroke()});b=a=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(f){f.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){r.push(function(f){f.stroke()});b=a=0}}});return c};
q={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Graphics]"}}}})();
(function(){var q,t,i=doodle.geom.Rectangle;doodle.Sprite=function(g){var p=Object.create(doodle.Node(typeof g==="string"?g:undefined));Object.defineProperties(p,q);Object.defineProperties(p,function(){var j=[],r={min_x:0,max_x:0,min_y:0,max_y:0};return{graphics:{enumerable:false,configurable:false,value:Object.create(doodle.Graphics.call(p,j,r))},width:function(){var e=0;return{enumerable:true,configurable:false,get:function(){return e},set:function(c){e=c}}}(),height:function(){var e=0;return{enumerable:true,
configurable:false,get:function(){return e},set:function(c){e=c}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(e){return this.__getBounds(e).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var e=i();return function(c){var o=this.children,a=o.length,b,h=this.width,s=this.height;b=Math.min;var z=Math.max,A={x:r.min_x,y:r.min_y},f={x:r.min_x+h,y:r.min_y};h={x:r.min_x+h,y:r.min_y+s};s={x:r.min_x,y:r.min_y+s};this.__localToGlobal(A);
this.__localToGlobal(f);this.__localToGlobal(h);this.__localToGlobal(s);c.__globalToLocal(A);c.__globalToLocal(f);c.__globalToLocal(h);c.__globalToLocal(s);e.left=b(A.x,f.x,h.x,s.x);e.right=z(A.x,f.x,h.x,s.x);e.top=b(A.y,f.y,h.y,s.y);for(e.bottom=z(A.y,f.y,h.y,s.y);a--;){b=o[a].__getBounds(c);b!==null&&e.__union(b)}return e}}()},hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(e){return this.getBounds(this).intersects(e.getBounds(this))}},hitTestPoint:{enumerable:true,
writable:true,configurable:false,value:function(e){return this.getBounds(this).containsPoint(this.globalToLocal(e))}},__draw:{enumerable:false,writable:false,configurable:false,value:function(e){j.forEach(function(c){c.call(p,e)})}}}}());typeof g==="function"&&g.call(p);return p};q={rotation:function(){var g=180/Math.PI,p=Math.PI/180;return{enumerable:true,configurable:false,get:function(){return this.transform.rotation*g},set:function(j){this.transform.rotation=j*p}}}(),toString:{enumerable:false,
writable:false,configurable:false,value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(g,p,j,r){this.x=g;this.y=p;this.width=j;this.height=r;return this}}};t=doodle.Sprite.isSprite=function(g){if(!g||typeof g!=="object"||typeof g.toString!=="function")return false;return g.toString()==="[object Sprite]"};doodle.Sprite.inheritsSprite=function(g){for(;g;)if(t(g))return true;else{if(typeof g!=="object")return false;g=Object.getPrototypeOf(g)}return false}})();
(function(){var q,t=/^url\((.*)\)/,i,g=doodle.geom.Rectangle,p=doodle.utils.rgb_str_to_hex,j=doodle.utils.hex_to_rgb_str,r=doodle.utils.get_element,e=doodle.utils.get_element_property,c=doodle.utils.set_element_property;doodle.ElementNode=function(o,a){var b=Object.create(doodle.Node(typeof a==="string"?a:undefined));Object.defineProperties(b,q);Object.defineProperties(b,function(){var h=null,s=b.id,z=b.alpha,A=b.visible,f=0,k=0,n=null,l=null,m="repeat";return{element:{enumerable:true,configurable:true,
get:function(){return h},set:function(d){if(d===null){if(h!==null){typeof this.__removeDomElement==="function"&&this.__removeDomElement(h);l=n=null;m="repeat";if(!this.parent)k=f=0}h=null}else{h=d=r(d);this.__addDomElement(h);if(d=e(h,"id"))s=d;else this.id=s;m=e(h,"backgroundRepeat")||m;n=(d=e(h,"backgroundColor",false,false))?p(d):n;d=e(h,"backgroundImage");l=(d=!d||d==="none"?null:l.match(t))?d[1]:l}}},id:{enumerable:true,configurable:true,get:function(){return s},set:function(d){s=c(this.element,
"id",d,"html")}},width:{enumerable:true,configurable:true,get:function(){return f},set:function(d){c(this.element,"width",d+"px");f=d}},height:{enumerable:true,configurable:true,get:function(){return k},set:function(d){c(this.element,"height",d+"px");k=d}},backgroundColor:{enumerable:true,configurable:true,get:function(){return n},set:function(d){if(typeof d==="number")d=j(d);c(this.element,"backgroundColor",d);n=p(e(this.element,"backgroundColor"))}},backgroundImage:{enumerable:true,configurable:true,
get:function(){return l},set:function(d){if(d){if(typeof d==="string"){if(d[0]==="#")d=r(d).src}else if(d&&d.tagName==="IMG")d=d.src;t.test(d)||(d="url("+encodeURI(d)+")");l=c(this.element,"backgroundImage",d)}else l=c(this.element,"backgroundImage",null)}},backgroundRepeat:{enumerable:true,configurable:true,get:function(){return m},set:function(d){m=c(this.element,"backgroundRepeat",d)}},alpha:{enumerable:true,configurable:true,get:function(){return z},set:function(d){c(this.element,"opacity",d)}},
visible:{enumerable:true,configurable:true,get:function(){return A},set:function(d){d?c(this.element,"visibility","visible"):c(this.element,"visibility","hidden");A=d}},__addDomElement:{enumerable:false,configurable:true,value:function(d){var v=e(d,"width","int")||d.width;d=e(d,"height","int")||d.height;if(typeof v==="number")f=v;if(typeof d==="number")k=d}},__getBounds:{enumerable:true,configurable:true,value:function(){var d=g();return function(v){var w=this.children,u=w.length,y,F=this.width,G=
this.height;y={x:0,y:0};var C={x:F,y:0};F={x:F,y:G};G={x:0,y:G};var H=Math.min,J=Math.max;this.__localToGlobal(y);this.__localToGlobal(C);this.__localToGlobal(F);this.__localToGlobal(G);v.__globalToLocal(y);v.__globalToLocal(C);v.__globalToLocal(F);v.__globalToLocal(G);d.left=H(y.x,C.x,F.x,G.x);d.right=J(y.x,C.x,F.x,G.x);d.top=H(y.y,C.y,F.y,G.y);for(d.bottom=J(y.y,C.y,F.y,G.y);u--;){y=w[u].__getBounds(v);y!==null&&d.__union(y)}return d}}()}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]===
"function"){arguments[0].call(b);o=undefined}else b.element=o;break;case 2:if(o)b.element=o;break;default:throw new SyntaxError("[object ElementNode](element, id): Invalid number of parameters.");}return b};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object ElementNode]"}}};i=doodle.ElementNode.isElementNode=function(o){if(!o||typeof o!=="object"||typeof o.toString!=="function")return false;return o.toString()==="[object ElementNode]"};doodle.ElementNode.inheritsElementNode=
function(o){for(;o;)if(i(o))return true;else{if(typeof o!=="object")return false;o=Object.getPrototypeOf(o)}return false}})();
(function(){var q,t=0,i,g=doodle.utils.set_element_property;doodle.Layer=function(p,j){var r=typeof p==="string"?p:"layer"+String("00"+t).slice(-2);r=Object.create(doodle.ElementNode(undefined,r));Object.defineProperties(r,q);Object.defineProperties(r,function(){var e=0,c=0,o=null;return{width:{enumerable:true,configurable:true,get:function(){return e},set:function(a){e=g(this.element,"width",a,"html")}},height:{enumerable:true,configurable:true,get:function(){return c},set:function(a){c=g(this.element,
"height",a,"html")}},context:{enumerable:true,configurable:true,get:function(){return o}},__addDomElement:{enumerable:false,writable:false,value:function(a){g(a,"position","absolute");if(this.parent){this.width=this.parent.width;this.height=this.parent.height}o=a.getContext("2d")}},__removeDomElement:{enumerable:false,writable:false,value:function(){o=null}}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(r);p=undefined}break;case 2:r.element=
j;break;default:throw new SyntaxError("[object Layer](id, element): Invalid number of parameters.");}if(r.element===null)r.element=document.createElement("canvas");t+=1;return r};q={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Layer]"}},__getBounds:{enumerable:true,configurable:true,value:function(){var p=doodle.geom.Rectangle();return function(){return p.compose(0,0,this.width,this.height)}}()}};i=doodle.Layer.isLayer=function(p){if(!p||typeof p!=="object"||
typeof p.toString!=="function")return false;return p.toString()==="[object Layer]"};doodle.Layer.inheritsLayer=function(p){for(;p;)if(i(p))return true;else{if(typeof p!=="object")return false;p=Object.getPrototypeOf(p)}return false}})();
(function(){var q,t=0,i,g,p,j,r,e,c,o=doodle.utils.create_scene_path,a=doodle.Layer.isLayer,b=doodle.utils.get_element,h=doodle.utils.get_element_property,s=doodle.utils.set_element_property,z=doodle.Layer,A=doodle.Event(doodle.Event.ENTER_FRAME),f=doodle.MouseEvent(""),k=doodle.KeyboardEvent("");doodle.Display=function(n){var l,m;if(n&&typeof n!=="function"){n=b(n);m=h(n,"id")}m=typeof m==="string"?m:"display"+String("00"+t++).slice(-2);l=Object.create(doodle.ElementNode(undefined,m));Object.defineProperties(l,
q);Object.defineProperties(l,function(){function d(x){B(x,Q,L,L.length,O,P,K)}function v(x){var D,I;O=D=E?x.offsetX:x.clientX-C.offsetLeft;P=I=E?x.offsetY:x.clientY-C.offsetTop;M(x,Q,L,L.length,D,I,K)}function w(x){N(x,Q,L,H,H.length,K)}function u(x){S(x,V,K)}function y(){T(H,H.length,J,J.length,U,L,L.length,K)}var F=0,G=0,C=null,H=l.children,J=doodle.EventDispatcher.dispatcher_queue,L=[],O=0,P=0,E=document.createEvent("MouseEvent").offsetX!==undefined,K=l,B=j,M=r,N=e,S=c,T=i,U=A,Q=f,V=k;K.addEventListener(doodle.Event.ADDED,
y);K.addEventListener(doodle.Event.REMOVED,y);document.addEventListener(doodle.KeyboardEvent.KEY_PRESS,u,false);document.addEventListener(doodle.KeyboardEvent.KEY_DOWN,u,false);document.addEventListener(doodle.KeyboardEvent.KEY_UP,u,false);return{root:{enumerable:true,writable:false,configurable:false,value:K},mouseX:{enumerable:true,configurable:false,get:function(){return O}},mouseY:{enumerable:true,configurable:false,get:function(){return P}},width:{get:function(){return F},set:function(x){var D=
H.length;s(this.element,"width",x+"px");for(F=x;D--;)H[D].width=x;return x}},height:{get:function(){return G},set:function(x){var D=H.length;s(this.element,"height",x+"px");for(G=x;D--;)H[D].height=x;return x}},__addDomElement:{enumerable:false,writable:false,value:function(x){s(x,"position","relative");var D=h(x,"width","int",false)||x.width,I=h(x,"height","int",false)||x.height;if(typeof D==="number")this.width=D;if(typeof I==="number")this.height=I;x.addEventListener(doodle.MouseEvent.MOUSE_MOVE,
v,false);x.addEventListener(doodle.MouseEvent.MOUSE_OUT,w,false);x.addEventListener(doodle.MouseEvent.CLICK,d,false);x.addEventListener(doodle.MouseEvent.DOUBLE_CLICK,d,false);x.addEventListener(doodle.MouseEvent.MOUSE_DOWN,d,false);x.addEventListener(doodle.MouseEvent.MOUSE_UP,d,false);x.addEventListener(doodle.MouseEvent.CONTEXT_MENU,d,false);x.addEventListener(doodle.MouseEvent.MOUSE_WHEEL,d,false);C=x}},__removeDomElement:{enumerable:false,writable:false,value:function(x){x.removeEventListener(doodle.MouseEvent.MOUSE_MOVE,
v,false);x.removeEventListener(doodle.MouseEvent.MOUSE_OUT,w,false);x.removeEventListener(doodle.MouseEvent.CLICK,d,false);x.removeEventListener(doodle.MouseEvent.DOUBLE_CLICK,d,false);x.removeEventListener(doodle.MouseEvent.MOUSE_DOWN,d,false);x.removeEventListener(doodle.MouseEvent.MOUSE_UP,d,false);x.removeEventListener(doodle.MouseEvent.CONTEXT_MENU,d,false);x.removeEventListener(doodle.MouseEvent.MOUSE_WHEEL,d,false);C=null}},allChildren:{enumerable:true,configurable:false,get:function(){return L}},
__sortAllChildren:{enumerable:false,configurable:false,value:function(){o(this,L,true).reverse()}},getNodesUnderPoint:{enumerable:true,configurable:false,value:function(x){var D=[],I=L,R=I.length,W=x.x;x=x.y;for(var X;R--;){X=I[R];X.__getBounds(this).contains(W,x)&&D.push(X)}return D}},addChildAt:{enumerable:true,configurable:false,value:function(){var x=K.addChildAt;return function(D,I){D.width=this.width;D.height=this.height;this.element.appendChild(D.element);return x.call(this,D,I)}}()},removeChildAt:{enumerable:true,
writable:false,configurable:false,value:function(){var x=K.removeChildAt;return function(D){this.element.removeChild(H[D].element);return x.call(this,D)}}()},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(){var x=K.swapChildrenAt;return function(D,I){D>I?this.element.insertBefore(H[I].element,H[D].element):this.element.insertBefore(H[D].element,H[I].element);return x.call(this,D,I)}}()},frameRate:function(){var x=false,D;return{get:function(){return x},set:function(I){if(I===
0||I===false){x=false;D!==undefined&&clearInterval(D)}else if(I!==x){D!==undefined&&clearInterval(D);D=setInterval(y,1E3/I);x=I}}}}()}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(n);n=undefined}else l.element=n;break;default:throw new SyntaxError("[object Display](element): Invalid number of parameters.");}i(l.children,l.children.length,doodle.EventDispatcher.dispatcher_queue,doodle.EventDispatcher.dispatcher_queue.length,A,l.allChildren,
l.allChildren.length,l);return l};q={parent:{enumerable:true,writable:false,configurable:false,value:null},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},addLayer:{value:function(n){return this.addChild(z(n))}},removeLayer:{value:function(n){return this.removeChildById(n)}},__getBounds:{enumerable:false,configurable:true,value:function(){var n=doodle.geom.Rectangle();return function(){return n.compose(0,0,this.width,this.height)}}()}};i=function(){var n=
0;return function(l,m,d,v,w,u,y){for(g(l,m);v--;)d[v].eventListeners.hasOwnProperty("enterFrame")&&d[v].handleEvent(w.__setTarget(d[v]));p(u,y);n++}}();g=function(n,l){for(var m;l--;){m=n[l].context;m.save();m.setTransform(1,0,0,1,0,0);m.clearRect(0,0,n[l].width,n[l].height);m.restore()}};p=function(n,l){for(var m,d;l--;){m=n[l];if((d=m.context)&&m.visible){d.save();d.transform.apply(d,m.__allTransforms.__toArray());if(!a(m))if(m.alpha!==1)d.globalAlpha=m.alpha;typeof m.__draw==="function"&&m.__draw(d);
d.restore()}}};j=function(n,l,m,d,v,w,u){for(;d--;)if(m[d].__getBounds(u).contains(v,w)){m[d].dispatchEvent(l.__copyMouseEventProperties(n,null));return true}return false};r=function(n,l,m,d,v,w,u){for(var y;d--;){y=m[d];if(y.__getBounds(u).contains(v,w)){if(!y.__pointInBounds){y.__pointInBounds=true;y.dispatchEvent(l.__copyMouseEventProperties(n,null,"mouseover"));y.dispatchEvent(l.__copyMouseEventProperties(n,null,"mouseenter"));return true}y.dispatchEvent(l.__copyMouseEventProperties(n,null));
return true}else if(y.__pointInBounds){y.__pointInBounds=false;y.dispatchEvent(l.__copyMouseEventProperties(n,null,"mouseout"));y.dispatchEvent(l.__copyMouseEventProperties(n,null,"mouseleave"));return true}}};e=function(n,l,m,d,v,w){if(v===0)w.__pointInBounds=false;else{w=d[v-1];for(v=m.length;v--;)m[v].__pointInBounds=false}w.dispatchEvent(l.__copyMouseEventProperties(n,null,"mouseout"));w.dispatchEvent(l.__copyMouseEventProperties(n,null,"mouseleave"));return true};c=function(n,l,m){m.broadcastEvent(l.__copyKeyboardEventProperties(n,
null));return true};doodle.Display.isDisplay=function(n){if(!n||typeof n!=="object"||typeof n.toString!=="function")return false;return n.toString()==="[object Display]"}})();
