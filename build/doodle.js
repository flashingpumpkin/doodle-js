var doodle={};doodle.utils={};doodle.geom={};doodle.events={};if(typeof Function.prototype.bind!=="function")Function.prototype.bind=function(c){var u=this;return function(){return u.apply(c,arguments)}};
(function(){Object.defineProperties(doodle.utils,{hex_to_rgb:{enumerable:true,writable:false,configurable:false,value:function(c){if(typeof c==="string"){c=c[0]==="#"?c.slice(1):c;c=parseInt(c,16)}return[c>>16&255,c>>8&255,c&255]}},hex_to_rgb_str:{enumerable:true,writable:false,configurable:false,value:function(c,u){var q=doodle.utils;u=u===undefined?1:u;c=q.hex_to_rgb(c);return q.rgb_to_rgb_str(c[0],c[1],c[2],u)}},rgb_str_to_hex:{enumerable:true,writable:false,configurable:false,value:function(c){var u=
doodle.utils;c=u.rgb_str_to_rgb(c);return u.rgb_to_hex(parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10))}},rgb_str_to_rgb:{enumerable:true,writable:false,configurable:false,value:function(){var c=/^rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,?(.*)\)$/;return function(u){u=u.trim().match(c);var q=[parseInt(u[1],10),parseInt(u[2],10),parseInt(u[3],10)];u=parseFloat(u[4]);typeof u==="number"&&!isNaN(u)&&q.push(u);return q}}()},rgb_to_hex:{enumerable:true,writable:false,configurable:false,
value:function(c,u,q){c=(q|u<<8|c<<16).toString(16);return"#"+String("000000"+c).slice(-6)}},rgb_to_rgb_str:{enumerable:true,writable:false,configurable:false,value:function(c,u,q,i){i=i===undefined?1:i;i=i<0?0:i>1?1:i;return i===1?"rgb("+c+","+u+","+q+")":"rgba("+c+","+u+","+q+","+i+")"}},get_element:{enumerable:true,writable:false,configurable:false,value:function(c){if(typeof c==="string"){c=c[0]==="#"?c.slice(1):c;return document.getElementById(c)}else return c&&c.tagName?c:null}},get_style_property:{enumerable:true,
writable:false,configurable:false,value:function(c,u,q){q=q===undefined?true:false;try{if(q&&document.defaultView&&document.defaultView.getComputedStyle)return document.defaultView.getComputedStyle(c,null)[u];else if(c.currentStyle)return c.currentStyle[u];else if(c.style)return c.style[u];else throw new ReferenceError("get_style_property: Cannot read property '"+u+"' of "+c+".");}catch(i){throw new ReferenceError("get_style_property: Cannot read property '"+u+"' of "+c+".");}}},get_element_property:{enumerable:true,
writable:false,configurable:false,value:function(c,u,q,i){q=q||false;var f;try{f=doodle.utils.get_style_property(c,u,i)}catch(o){f=undefined}if(f===undefined||f===null||f==="")f=c.getAttribute(u);if(q!==false)switch(q){case "int":f=parseInt(f,10);f=isNaN(f)?null:f;break;case "number":case "float":f=parseFloat(f);f=isNaN(f)?null:f;break;case "string":f=String(f)}return f}},set_element_property:{enumerable:true,writable:false,configurable:false,value:function(c,u,q,i){i=i===undefined?"css":i;switch(i){case "css":c.style[u]=
q;break;case "html":c.setAttribute(u,q);break;default:throw new SyntaxError("set_element_property: type must be 'css' property or 'html' attribute.");}return q}},create_scene_path:{enumerable:true,writable:false,configurable:false,value:function c(u,q,i){q=q===undefined?[]:q;i=i===undefined?false:i;var f=u.children.length;i&&q.splice(0,q.length);if(f!==0)for(;f--;)c(u.children[f],q,false);q.push(u);return q}}})})();
Object.defineProperty(doodle,"Keyboard",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BACKSPACE:{enumerable:true,writable:false,configurable:false,value:8},TAB:{enumerable:true,writable:false,configurable:false,value:9},ENTER:{enumerable:true,writable:false,configurable:false,value:13},COMMAND:{enumerable:true,writable:false,configurable:false,value:15},SHIFT:{enumerable:true,writable:false,configurable:false,value:16},CONTROL:{enumerable:true,writable:false,configurable:false,
value:17},ALTERNATE:{enumerable:true,writable:false,configurable:false,value:18},PAUSE:{enumerable:true,writable:false,configurable:false,value:19},CAPS_LOCK:{enumerable:true,writable:false,configurable:false,value:20},NUMPAD:{enumerable:true,writable:false,configurable:false,value:21},ESCAPE:{enumerable:true,writable:false,configurable:false,value:27},SPACE:{enumerable:true,writable:false,configurable:false,value:32},PAGE_UP:{enumerable:true,writable:false,configurable:false,value:33},PAGE_DOWN:{enumerable:true,
writable:false,configurable:false,value:34},END:{enumerable:true,writable:false,configurable:false,value:35},HOME:{enumerable:true,writable:false,configurable:false,value:36},LEFT:{enumerable:true,writable:false,configurable:false,value:37},UP:{enumerable:true,writable:false,configurable:false,value:38},RIGHT:{enumerable:true,writable:false,configurable:false,value:39},DOWN:{enumerable:true,writable:false,configurable:false,value:40},INSERT:{enumerable:true,writable:false,configurable:false,value:45},
DELETE:{enumerable:true,writable:false,configurable:false,value:46},NUMBER_0:{enumerable:true,writable:false,configurable:false,value:48},NUMBER_1:{enumerable:true,writable:false,configurable:false,value:49},NUMBER_2:{enumerable:true,writable:false,configurable:false,value:50},NUMBER_3:{enumerable:true,writable:false,configurable:false,value:51},NUMBER_4:{enumerable:true,writable:false,configurable:false,value:52},NUMBER_5:{enumerable:true,writable:false,configurable:false,value:53},NUMBER_6:{enumerable:true,
writable:false,configurable:false,value:54},NUMBER_7:{enumerable:true,writable:false,configurable:false,value:55},NUMBER_8:{enumerable:true,writable:false,configurable:false,value:56},NUMBER_9:{enumerable:true,writable:false,configurable:false,value:57},A:{enumerable:true,writable:false,configurable:false,value:65},B:{enumerable:true,writable:false,configurable:false,value:66},C:{enumerable:true,writable:false,configurable:false,value:67},D:{enumerable:true,writable:false,configurable:false,value:68},
E:{enumerable:true,writable:false,configurable:false,value:69},F:{enumerable:true,writable:false,configurable:false,value:70},G:{enumerable:true,writable:false,configurable:false,value:71},H:{enumerable:true,writable:false,configurable:false,value:72},I:{enumerable:true,writable:false,configurable:false,value:73},J:{enumerable:true,writable:false,configurable:false,value:74},K:{enumerable:true,writable:false,configurable:false,value:75},L:{enumerable:true,writable:false,configurable:false,value:76},
M:{enumerable:true,writable:false,configurable:false,value:77},N:{enumerable:true,writable:false,configurable:false,value:78},O:{enumerable:true,writable:false,configurable:false,value:79},P:{enumerable:true,writable:false,configurable:false,value:80},Q:{enumerable:true,writable:false,configurable:false,value:81},R:{enumerable:true,writable:false,configurable:false,value:82},S:{enumerable:true,writable:false,configurable:false,value:83},T:{enumerable:true,writable:false,configurable:false,value:84},
U:{enumerable:true,writable:false,configurable:false,value:85},V:{enumerable:true,writable:false,configurable:false,value:86},W:{enumerable:true,writable:false,configurable:false,value:87},X:{enumerable:true,writable:false,configurable:false,value:88},Y:{enumerable:true,writable:false,configurable:false,value:89},Z:{enumerable:true,writable:false,configurable:false,value:90},WINDOWS_KEY:{enumerable:true,writable:false,configurable:false,value:91},NUMPAD_0:{enumerable:true,writable:false,configurable:false,
value:96},NUMPAD_1:{enumerable:true,writable:false,configurable:false,value:97},NUMPAD_2:{enumerable:true,writable:false,configurable:false,value:98},NUMPAD_3:{enumerable:true,writable:false,configurable:false,value:99},NUMPAD_4:{enumerable:true,writable:false,configurable:false,value:100},NUMPAD_5:{enumerable:true,writable:false,configurable:false,value:101},NUMPAD_6:{enumerable:true,writable:false,configurable:false,value:102},NUMPAD_7:{enumerable:true,writable:false,configurable:false,value:103},
NUMPAD_8:{enumerable:true,writable:false,configurable:false,value:104},NUMPAD_9:{enumerable:true,writable:false,configurable:false,value:105},NUMPAD_MULTIPLY:{enumerable:true,writable:false,configurable:false,value:106},NUMPAD_ADD:{enumerable:true,writable:false,configurable:false,value:107},NUMPAD_ENTER:{enumerable:true,writable:false,configurable:false,value:108},NUMPAD_SUBTRACT:{enumerable:true,writable:false,configurable:false,value:109},NUMPAD_DECIMAL:{enumerable:true,writable:false,configurable:false,
value:110},NUMPAD_DIVIDE:{enumerable:true,writable:false,configurable:false,value:111},F1:{enumerable:true,writable:false,configurable:false,value:112},F2:{enumerable:true,writable:false,configurable:false,value:113},F3:{enumerable:true,writable:false,configurable:false,value:114},F4:{enumerable:true,writable:false,configurable:false,value:115},F5:{enumerable:true,writable:false,configurable:false,value:116},F6:{enumerable:true,writable:false,configurable:false,value:117},F7:{enumerable:true,writable:false,
configurable:false,value:118},F8:{enumerable:true,writable:false,configurable:false,value:119},F9:{enumerable:true,writable:false,configurable:false,value:120},F10:{enumerable:true,writable:false,configurable:false,value:121},F11:{enumerable:true,writable:false,configurable:false,value:122},F12:{enumerable:true,writable:false,configurable:false,value:123},F13:{enumerable:true,writable:false,configurable:false,value:124},F14:{enumerable:true,writable:false,configurable:false,value:125},F15:{enumerable:true,
writable:false,configurable:false,value:126},SCROLL:{enumerable:true,writable:false,configurable:false,value:145},SEMICOLON:{enumerable:true,writable:false,configurable:false,value:186},EQUAL:{enumerable:true,writable:false,configurable:false,value:187},COMMA:{enumerable:true,writable:false,configurable:false,value:188},MINUS:{enumerable:true,writable:false,configurable:false,value:189},PERIOD:{enumerable:true,writable:false,configurable:false,value:190},SLASH:{enumerable:true,writable:false,configurable:false,
value:191},BACKQUOTE:{enumerable:true,writable:false,configurable:false,value:192},LEFTBRACKET:{enumerable:true,writable:false,configurable:false,value:219},BACKSLASH:{enumerable:true,writable:false,configurable:false,value:220},RIGHTBRACKET:{enumerable:true,writable:false,configurable:false,value:221},QUOTE:{enumerable:true,writable:false,configurable:false,value:222}})});
Object.defineProperty(doodle,"GradientType",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{LINEAR:{enumerable:true,writable:false,configurable:false,value:"linearGradient"},RADIAL:{enumerable:true,writable:false,configurable:false,value:"radialGradient"}})});
Object.defineProperty(doodle,"Pattern",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{REPEAT:{enumerable:true,writable:false,configurable:false,value:"repeat"},REPEAT_X:{enumerable:true,writable:false,configurable:false,value:"repeat-x"},REPEAT_Y:{enumerable:true,writable:false,configurable:false,value:"repeat-y"},NO_REPEAT:{enumerable:true,writable:false,configurable:false,value:"no-repeat"}})});
Object.defineProperty(doodle,"LineCap",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{BUTT:{enumerable:true,writable:false,configurable:false,value:"butt"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},SQUARE:{enumerable:true,writable:false,configurable:false,value:"square"}})});
Object.defineProperty(doodle,"LineJoin",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{MITER:{enumerable:true,writable:false,configurable:false,value:"miter"},ROUND:{enumerable:true,writable:false,configurable:false,value:"round"},BEVEL:{enumerable:true,writable:false,configurable:false,value:"bevel"}})});
(function(){var c,u,q;doodle.events.Event=function(i,f,o){var s=Object.create(c),j=arguments.length,k,a;Object.defineProperties(s,u);Object.defineProperties(s,function(){var b,e,m,w=false,z=0,h=null,n=null,v=null,p=new Date,l=true,d=false,r=false;a=function(t,g,x){g=g===undefined?false:g;x=x===undefined?false:x;if(g!==false)n=h=g;else{h=t.currentTarget;n=t.target}b=x?x:t.type;e=t.bubbles;m=t.cancelable;w=t.cancelBubble;z=t.eventPhase;v=t.srcElement;p=t.timeStamp;l=t.returnValue;if(t.__cancel)d=true;
if(t.__cancelNow)r=true};return{id:function(){var t=null;return{enumerable:true,configurable:false,get:function(){return t===null?this.toString()+"[type="+this.type+"]":t},set:function(g){t=g}}}(),type:{enumerable:true,configurable:false,get:function(){return b}},__setType:{enumerable:false,value:function(t){b=t}},bubbles:{enumerable:true,configurable:false,get:function(){return e}},cancelable:{enumerable:true,configurable:false,get:function(){return m}},cancelBubble:{enumerable:true,configurable:false,
get:function(){return w},set:function(t){w=t}},__cancel:{enumerable:false,configurable:false,get:function(){return d}},__cancelNow:{enumerable:false,configurable:false,get:function(){return r}},currentTarget:{enumerable:true,configurable:false,get:function(){return h}},__setCurrentTarget:{enumerable:false,value:function(t){h=t;return this}},target:{enumerable:true,configurable:false,get:function(){return n}},__setTarget:{enumerable:false,value:function(t){n=t;return this}},eventPhase:{enumerable:true,
configurable:false,get:function(){return z}},__setEventPhase:{enumerable:false,value:function(t){z=t;return this}},srcElement:{enumerable:true,configurable:false,get:function(){return v}},timeStamp:{enumerable:true,configurable:false,get:function(){return p}},returnValue:{enumerable:true,configurable:false,get:function(){return l}},initEvent:{enumerable:true,configurable:false,value:function(t,g,x){t=t===undefined?"undefined":t;g=g===undefined?false:g;x=x===undefined?false:x;b=t;e=g;m=x;return this}},
preventDefault:{enumerable:true,configurable:false,value:function(){}},stopPropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)d=true;else throw Error(this.id+" Event.stopPropagation: Event can not be cancelled.");}},stopImmediatePropagation:{enumerable:true,configurable:false,value:function(){if(this.cancelable)r=d=true;else throw Error(this.id+" Event.stopImmediatePropagation: Event can not be cancelled.");}},__copyEventProperties:{enumerable:false,configurable:false,
value:function(t,g,x){g=g===undefined?false:g;x=x===undefined?false:x;a(t,g,x);return this}}}}());if(j===1&&(typeof arguments[0]==="function"||q(arguments[0]))){k=arguments[0];i=undefined}if(k)typeof k==="function"?k.call(s):a(k,false,false);else s.initEvent(i,f,o);return s};u={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Event]"}}};c=Object.create({},{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,
writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},MOUSEDOWN:{enumerable:true,writable:false,configurable:false,value:1},MOUSEUP:{enumerable:true,writable:false,configurable:false,value:2},MOUSEOVER:{enumerable:true,writable:false,configurable:false,value:4},MOUSEOUT:{enumerable:true,writable:false,configurable:false,value:8},MOUSEMOVE:{enumerable:true,writable:false,configurable:false,value:16},MOUSEDRAG:{enumerable:true,writable:false,
configurable:false,value:32},CLICK:{enumerable:true,writable:false,configurable:false,value:64},DBLCLICK:{enumerable:true,writable:false,configurable:false,value:128},KEYDOWN:{enumerable:true,writable:false,configurable:false,value:256},KEYUP:{enumerable:true,writable:false,configurable:false,value:512},KEYPRESS:{enumerable:true,writable:false,configurable:false,value:1024},DRAGDROP:{enumerable:true,writable:false,configurable:false,value:2048},FOCUS:{enumerable:true,writable:false,configurable:false,
value:4096},BLUR:{enumerable:true,writable:false,configurable:false,value:8192},SELECT:{enumerable:true,writable:false,configurable:false,value:16384},CHANGE:{enumerable:true,writable:false,configurable:false,value:32768}});q=doodle.events.Event.isEvent=function(i){if(typeof i==="object")for(;i;)if(i.toString()==="[object Event]"||i.constructor&&i.constructor.name==="Event")return true;else i=Object.getPrototypeOf(i);return false}})();
(function(){var c,u=doodle.events.Event.isEvent;doodle.events.UIEvent=function(q,i,f,o,s){var j,k,a;if(u(arguments[0])){k=arguments[0];q=undefined;j=Object.create(doodle.events.Event(k))}else if(typeof arguments[0]==="function"){k=arguments[0];q=undefined;j=Object.create(doodle.events.Event(""))}else{i=i===undefined?false:i;f=f===undefined?false:f;j=Object.create(doodle.events.Event(q,i,f))}Object.defineProperties(j,c);Object.defineProperties(j,function(){var b=null,e=0,m=0,w=0,z=0,h=0,n=0,v=0,p=
0;a=function(l){if(l.view!==undefined)b=l.view;if(l.detail!==undefined)e=l.detail;if(l.which!==undefined)m=l.which;if(l.charCode!==undefined)w=l.charCode;if(l.keyCode!==undefined)z=l.keyCode;if(l.layerX!==undefined)h=l.layerX;if(l.layerY!==undefined)n=l.layerY;if(l.pageX!==undefined)v=l.pageX;if(l.pageY!==undefined)p=l.pageY};return{view:{enumerable:true,configurable:false,get:function(){return b}},detail:{enumerable:true,configurable:false,get:function(){return e}},which:{enumerable:true,configurable:false,
get:function(){return m}},charCode:{enumerable:true,configurable:false,get:function(){return w}},keyCode:{enumerable:true,configurable:false,get:function(){return z}},layerX:{enumerable:true,configurable:false,get:function(){return h}},layerY:{enumerable:true,configurable:false,get:function(){return n}},pageX:{enumerable:true,configurable:false,get:function(){return v}},pageY:{enumerable:true,configurable:false,get:function(){return p}},initUIEvent:{value:function(l,d,r,t,g){d=d===undefined?false:
d;r=r===undefined?false:r;t=t===undefined?null:t;g=g===undefined?0:g;b=t;e=g;this.initEvent(l,d,r);return this}},__copyUIEventProperties:{enumerable:false,configurable:false,value:function(l,d,r){d=d===undefined?false:d;r=r===undefined?false:r;a(l);return this.__copyEventProperties(l,d,r)}}}}());if(k)typeof k==="function"?k.call(j):a(k);else j.initUIEvent(q,i,f,o,s);return j};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object UIEvent]"}}}})();
doodle.events.UIEvent.isUIEvent=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object UIEvent]"||c.constructor&&c.constructor.name==="UIEvent")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=doodle.events.Event.isEvent;doodle.events.MouseEvent=function(q,i,f,o,s,j,k,a,b,e,m,w,z,h,n){var v,p,l;if(u(arguments[0])){p=arguments[0];q=undefined;v=Object.create(doodle.events.UIEvent(p))}else if(typeof arguments[0]==="function"){p=arguments[0];q=undefined;v=Object.create(doodle.events.UIEvent(""))}else{i=i===undefined?false:i;f=f===undefined?false:f;o=o===undefined?null:o;s=s===undefined?0:s;v=Object.create(doodle.events.UIEvent(q,i,f,o,s))}Object.defineProperties(v,c);Object.defineProperties(v,
function(){var d=0,r=0,t=0,g=0,x=0,A=0,G=0,B=0,H=false,E=false,J=false,K=false,O=0,R=null;l=function(F){d=F.x!==undefined?F.x:0;r=F.y!==undefined?F.y:0;t=F.offsetX!==undefined?F.offsetX:0;g=F.offsetY!==undefined?F.offsetY:0;if(F.screenX!==undefined)x=F.screenX;if(F.screenY!==undefined)A=F.screenY;if(F.clientX!==undefined)G=F.clientX;if(F.clientY!==undefined)B=F.clientY;if(F.ctrlKey!==undefined)H=F.ctrlKey;if(F.altKey!==undefined)E=F.altKey;if(F.shiftKey!==undefined)J=F.shiftKey;if(F.metaKey!==undefined)K=
F.metaKey;if(F.button!==undefined)O=F.button;if(F.relatedTarget!==undefined)R=F.relatedTarget};return{x:{enumerable:true,configurable:false,get:function(){return d}},y:{enumerable:true,configurable:false,get:function(){return r}},screenX:{enumerable:true,configurable:false,get:function(){return x}},screenY:{enumerable:true,configurable:false,get:function(){return A}},clientX:{enumerable:true,configurable:false,get:function(){return G}},clientY:{enumerable:true,configurable:false,get:function(){return B}},
offsetX:{enumerable:true,configurable:false,get:function(){return t}},offsetY:{enumerable:true,configurable:false,get:function(){return g}},ctrlKey:{enumerable:true,configurable:false,get:function(){return H}},altKey:{enumerable:true,configurable:false,get:function(){return E}},shiftKey:{enumerable:true,configurable:false,get:function(){return J}},metaKey:{enumerable:true,configurable:false,get:function(){return K}},button:{enumerable:true,configurable:false,get:function(){return O}},relatedTarget:{enumerable:true,
configurable:false,get:function(){return R}},initMouseEvent:{value:function(F,L,C,M,N,S,T,U,P,V,y,D,I,Q,W){L=L===undefined?false:L;C=C===undefined?false:C;M=M===undefined?null:M;N=N===undefined?0:N;S=S===undefined?0:S;T=T===undefined?0:T;U=U===undefined?0:U;P=P===undefined?0:P;V=V===undefined?false:V;y=y===undefined?false:y;D=D===undefined?false:D;I=I===undefined?false:I;Q=Q===undefined?0:Q;n=W===undefined?null:W;x=S;A=T;G=U;B=P;H=V;E=y;J=D;K=I;O=Q;R=W;return this.initUIEvent(F,L,C,M,N)}},getModifierState:{value:function(F){switch(F){case "Alt":return E;
case "Control":return H;case "Meta":return K;case "Shift":return J;default:return false}}},__copyMouseEventProperties:{enumerable:false,configurable:false,value:function(F,L,C){L=L===undefined?false:L;C=C===undefined?false:C;l(F);return this.__copyUIEventProperties(F,L,C)}}}}());if(p)typeof p==="function"?p.call(v):l(p);else v.initMouseEvent(q,i,f,o,s,j,k,a,b,e,m,w,z,h,n);return v};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object MouseEvent]"}}}})();
doodle.events.MouseEvent.isMouseEvent=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object MouseEvent]"||c.constructor&&c.constructor.name==="MouseEvent")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=doodle.events.Event.isEvent;doodle.events.TouchEvent=function(q,i,f,o,s,j,k,a,b,e,m,w,z,h,n,v,p,l){var d,r,t;if(u(arguments[0])){r=arguments[0];q=undefined;d=Object.create(doodle.events.UIEvent(r))}else if(typeof arguments[0]==="function"){r=arguments[0];q=undefined;d=Object.create(doodle.events.UIEvent(""))}else{i=i===undefined?false:i;f=f===undefined?false:f;o=o===undefined?null:o;s=s===undefined?0:s;d=Object.create(doodle.events.UIEvent(q,i,f,o,s))}Object.defineProperties(d,
c);Object.defineProperties(d,function(){var g=0,x=0,A=0,G=0,B=false,H=false,E=false,J=false,K=null,O=null,R=null,F=1,L=0;t=function(C){if(C.screenX!==undefined)g=C.screenX;if(C.screenY!==undefined)x=C.screenY;if(C.clientX!==undefined)A=C.clientX;if(C.clientY!==undefined)G=C.clientY;if(C.ctrlKey!==undefined)B=C.ctrlKey;if(C.altKey!==undefined)H=C.altKey;if(C.shiftKey!==undefined)E=C.shiftKey;if(C.metaKey!==undefined)J=C.metaKey;if(C.touches!==undefined)K=C.touches;if(C.targetTouches!==undefined)O=
C.targetTouches;if(C.changedTouches!==undefined)R=C.changedTouches;if(C.scale!==undefined)F=C.scale;if(C.rotation!==undefined)L=C.rotation};return{screenX:{enumerable:true,configurable:false,get:function(){return g}},screenY:{enumerable:true,configurable:false,get:function(){return x}},clientX:{enumerable:true,configurable:false,get:function(){return A}},clientY:{enumerable:true,configurable:false,get:function(){return G}},ctrlKey:{enumerable:true,configurable:false,get:function(){return B}},altKey:{enumerable:true,
configurable:false,get:function(){return H}},shiftKey:{enumerable:true,configurable:false,get:function(){return E}},metaKey:{enumerable:true,configurable:false,get:function(){return J}},touches:{enumerable:true,configurable:false,get:function(){return K}},targetTouches:{enumerable:true,configurable:false,get:function(){return O}},changedTouches:{enumerable:true,configurable:false,get:function(){return R}},scale:{enumerable:true,configurable:false,get:function(){return F}},rotation:{enumerable:true,
configurable:false,get:function(){return L}},initTouchEvent:{value:function(C,M,N,S,T,U,P,V,y,D,I,Q,W,X,Y,Z,$,aa){M=M===undefined?false:M;N=N===undefined?false:N;S=S===undefined?null:S;T=T===undefined?0:T;U=U===undefined?0:U;P=P===undefined?0:P;V=V===undefined?0:V;y=y===undefined?0:y;D=D===undefined?false:D;I=I===undefined?false:I;Q=Q===undefined?false:Q;W=W===undefined?false:W;X=X===undefined?null:X;Y=Y===undefined?null:Y;Z=Z===undefined?null:Z;$=$===undefined?1:$;aa=aa===undefined?0:aa;g=U;x=P;
A=V;G=y;B=D;H=I;E=Q;J=W;K=X;O=Y;R=Z;F=$;L=aa;this.initUIEvent(C,M,N,S,T);return this}},getModifierState:{value:function(C){switch(C){case "Alt":return H;case "Control":return B;case "Meta":return J;case "Shift":return E;default:return false}}},__copyTouchEventProperties:{enumerable:false,configurable:false,value:function(C,M,N){M=M===undefined?false:M;N=N===undefined?false:N;t(C);return this.__copyUIEventProperties(C,M,N)}}}}());if(r)typeof r==="function"?r.call(d):t(r);else d.initTouchEvent(q,i,
f,o,s,j,k,a,b,e,m,w,z,h,n,v,p,l);return d};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TouchEvent]"}}}})();doodle.events.TouchEvent.isTouchEvent=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object TouchEvent]"||c.constructor&&c.constructor.name==="TouchEvent")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=doodle.events.Event.isEvent;doodle.events.TextEvent=function(q,i,f,o,s,j){var k,a,b;if(u(arguments[0])){a=arguments[0];q=undefined;k=Object.create(doodle.events.UIEvent(a))}else if(typeof arguments[0]==="function"){a=arguments[0];q=undefined;k=Object.create(doodle.events.UIEvent(""))}else{i=i===undefined?false:i;f=f===undefined?false:f;o=o===undefined?null:o;k=Object.create(doodle.events.UIEvent(q,i,f,o))}Object.defineProperties(k,c);Object.defineProperties(k,function(){var e=
"",m=doodle.events.TextEvent.INPUT_METHOD_UNKNOWN;b=function(w){if(w.data!==undefined)e=w.data;if(w.inputMode!==undefined)m=w.inputMode};return{data:{enumerable:true,configurable:false,get:function(){return e}},inputMode:{enumerable:true,configurable:false,get:function(){return m}},initTextEvent:{value:function(w,z,h,n,v,p){z=z===undefined?false:z;h=h===undefined?false:h;n=n===undefined?null:n;v=v===undefined?"":v;p=p===undefined?doodle.events.TextEvent.INPUT_METHOD_UNKNOWN:p;e=v;m=p;this.initUIEvent(w,
z,h,n);return this}},__copyTextEventProperties:{enumerable:false,configurable:false,value:function(w,z,h){z=z===undefined?false:z;h=h===undefined?false:h;b(w);return this.__copyUIEventProperties(w,z,h)}}}}());if(a)typeof a==="function"?a.call(k):b(a);else k.initTextEvent(q,i,f,o,s,j);return k};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object TextEvent]"}}}})();
doodle.events.TextEvent.isTextEvent=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object TextEvent]"||c.constructor&&c.constructor.name==="TextEvent")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=doodle.events.Event.isEvent;doodle.events.KeyboardEvent=function(q,i,f,o,s,j,k,a){var b,e,m;if(u(arguments[0])){e=arguments[0];q=undefined;b=Object.create(doodle.events.UIEvent(e))}else if(typeof arguments[0]==="function"){e=arguments[0];q=undefined;b=Object.create(doodle.events.UIEvent(""))}else{i=i===undefined?false:i;f=f===undefined?false:f;o=o===undefined?null:o;b=Object.create(doodle.events.UIEvent(q,i,f,o))}Object.defineProperties(b,c);Object.defineProperties(b,function(){var w=
"",z=0,h=false,n=false,v=false,p=false,l=false;m=function(d){if(d.keyIdentifier!==undefined)w=d.keyIdentifier;if(d.keyLocation!==undefined)z=d.keyLocation;if(d.repeat!==undefined)h=d.repeat;if(d.ctrlKey!==undefined)n=d.ctrlKey;if(d.altKey!==undefined)v=d.altKey;if(d.shiftKey!==undefined)p=d.shiftKey;if(d.metaKey!==undefined)l=d.metaKey;if(d.altGraphKey!==undefined)v=d.altGraphKey};return{keyIdentifier:{enumerable:true,configurable:false,get:function(){return w}},keyLocation:{enumerable:true,configurable:false,
get:function(){return z}},repeat:{enumerable:true,configurable:false,get:function(){return h}},ctrlKey:{enumerable:true,configurable:false,get:function(){return n}},altKey:{enumerable:true,configurable:false,get:function(){return v}},shiftKey:{enumerable:true,configurable:false,get:function(){return p}},metaKey:{enumerable:true,configurable:false,get:function(){return l}},altGraphKey:{enumerable:true,configurable:false,get:function(){return false}},initKeyboardEvent:{value:function(d,r,t,g,x,A,G,
B){r=r===undefined?false:r;t=t===undefined?false:t;g=g===undefined?null:g;x=x===undefined?"":x;A=A===undefined?0:A;G=G===undefined?"":G;B=B===undefined?false:B;w=x;z=A;h=B;G.split(" ").forEach(function(H){switch(H){case "Alt":v=true;break;case "Control":n=true;break;case "Meta":l=true;break;case "Shift":p=true}});this.initUIEvent(d,r,t,g);return this}},getModifierState:{value:function(d){switch(d){case "Alt":return v;case "Control":return n;case "Meta":return l;case "Shift":return p;default:return false}}},
__copyKeyboardEventProperties:{enumerable:false,configurable:false,value:function(d,r,t){r=r===undefined?false:r;t=t===undefined?false:t;m(d);return this.__copyUIEventProperties(d,r,t)}}}}());if(e)typeof e==="function"?e.call(b):m(e);else b.initKeyboardEvent(q,i,f,o,s,j,k,a);return b};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object KeyboardEvent]"}}}})();
doodle.events.KeyboardEvent.isKeyboardEvent=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object KeyboardEvent]"||c.constructor&&c.constructor.name==="KeyboardEvent")return true;else c=Object.getPrototypeOf(c);return false};
Object.defineProperties(doodle.events.Event,{CAPTURING_PHASE:{enumerable:true,writable:false,configurable:false,value:1},AT_TARGET:{enumerable:true,writable:false,configurable:false,value:2},BUBBLING_PHASE:{enumerable:true,writable:false,configurable:false,value:3},ADDED:{enumerable:true,writable:false,configurable:false,value:"added"},REMOVED:{enumerable:true,writable:false,configurable:false,value:"removed"},ENTER_FRAME:{enumerable:true,writable:false,configurable:false,value:"enterFrame"},LOAD:{enumerable:true,
writable:false,configurable:false,value:"load"},CHANGE:{enumerable:true,writable:false,configurable:false,value:"change"}});Object.defineProperties(doodle.events.UIEvent,{FOCUS_IN:{enumerable:true,writable:false,configurable:false,value:"focusIn"}});
Object.defineProperties(doodle.events.MouseEvent,{CLICK:{enumerable:true,writable:false,configurable:false,value:"click"},DOUBLE_CLICK:{enumerable:true,writable:false,configurable:false,value:"dblclick"},CONTEXT_MENU:{enumerable:true,writable:false,configurable:false,value:"contextmenu"},MOUSE_DOWN:{enumerable:true,writable:false,configurable:false,value:"mousedown"},MOUSE_UP:{enumerable:true,writable:false,configurable:false,value:"mouseup"},MOUSE_WHEEL:{enumerable:true,writable:false,configurable:false,
value:"mousewheel"},MOUSE_MOVE:{enumerable:true,writable:false,configurable:false,value:"mousemove"},MOUSE_OUT:{enumerable:true,writable:false,configurable:false,value:"mouseout"},MOUSE_OVER:{enumerable:true,writable:false,configurable:false,value:"mouseover"},MOUSE_ENTER:{enumerable:true,writable:false,configurable:false,value:"mouseenter"},MOUSE_LEAVE:{enumerable:true,writable:false,configurable:false,value:"mouseleave"}});
Object.defineProperties(doodle.events.TouchEvent,{TOUCH_START:{enumerable:true,writable:false,configurable:false,value:"touchstart"},TOUCH_MOVE:{enumerable:true,writable:false,configurable:false,value:"touchmove"},TOUCH_END:{enumerable:true,writable:false,configurable:false,value:"touchend"},TOUCH_CANCEL:{enumerable:true,writable:false,configurable:false,value:"touchcancel"}});
Object.defineProperties(doodle.events.KeyboardEvent,{KEY_PRESS:{enumerable:true,writable:false,configurable:false,value:"keypress"},KEY_UP:{enumerable:true,writable:false,configurable:false,value:"keyup"},KEY_DOWN:{enumerable:true,writable:false,configurable:false,value:"keydown"},KEY_LOCATION_STANDARD:{enumerable:true,writable:false,configurable:false,value:0},KEY_LOCATION_LEFT:{enumerable:true,writable:false,configurable:false,value:1},KEY_LOCATION_RIGHT:{enumerable:true,writable:false,configurable:false,
value:2},KEY_LOCATION_NUMPAD:{enumerable:true,writable:false,configurable:false,value:3},KEY_LOCATION_MOBILE:{enumerable:true,writable:false,configurable:false,value:4},KEY_LOCATION_JOYSTICK:{enumerable:true,writable:false,configurable:false,value:5}});
Object.defineProperties(doodle.events.TextEvent,{TEXT_INPUT:{enumerable:true,writable:false,configurable:false,value:"textInput"},INPUT_METHOD_UNKNOWN:{enumerable:true,writable:false,configurable:false,value:0},INPUT_METHOD_KEYBOARD:{enumerable:true,writable:false,configurable:false,value:1},INPUT_METHOD_PASTE:{enumerable:true,writable:false,configurable:false,value:2},INPUT_METHOD_DROP:{enumerable:true,writable:false,configurable:false,value:3},INPUT_METHOD_IME:{enumerable:true,writable:false,configurable:false,
value:4},INPUT_METHOD_OPTION:{enumerable:true,writable:false,configurable:false,value:5},INPUT_METHOD_HANDWRITING:{enumerable:true,writable:false,configurable:false,value:6},INPUT_METHOD_VOICE:{enumerable:true,writable:false,configurable:false,value:7},INPUT_METHOD_MULTIMODAL:{enumerable:true,writable:false,configurable:false,value:8},INPUT_METHOD_SCRIPT:{enumerable:true,writable:false,configurable:false,value:9}});
(function(){var c,u,q=Array(2),i={x:0,y:0},f=Math.cos,o=Math.sin,s=Math.sqrt;doodle.geom.Point=function(j,k){var a={},b=arguments.length;Object.defineProperties(a,c);Object.defineProperties(a,function(){var e=0,m=0;return{x:{enumerable:true,configurable:false,get:function(){return e},set:function(w){e=w}},y:{enumerable:true,configurable:false,get:function(){return m},set:function(w){m=w}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){q[0]=e;q[1]=m;return q}},id:function(){var w=
null;return{enumerable:true,configurable:false,get:function(){return w===null?this.toString():w},set:function(z){w=z}}}()}}());switch(b){case 2:a.compose(j,k);break;case 1:b=arguments[0];j=undefined;if(typeof b==="function")b.call(a);else Array.isArray(b)?a.compose.apply(a,b):a.compose(b.x,b.y)}return a};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(x="+this.x+",y="+this.y+")"}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},
length:{enumerable:true,configurable:false,get:function(){return u(i,this)}},compose:{enumerable:true,writable:false,configurable:false,value:function(j,k){this.x=j;this.y=k;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return Point(this.x,this.y)}},equals:{enumerable:true,writable:false,configurable:false,value:function(j){return this.x===j.x&&this.y===j.y}},add:{enumerable:true,writable:false,configurable:false,value:function(j){return Point(this.x+j.x,
this.y+j.y)}},subtract:{enumerable:true,writable:false,configurable:false,value:function(j){return Point(this.x-j.x,this.y-j.y)}},offset:{enumerable:true,writable:false,configurable:false,value:function(j,k){this.x+=j;this.y+=k;return this}},normalize:{enumerable:true,writable:false,configurable:false,value:function(j){this.x=this.x/this.length*j;this.y=this.y/this.length*j;return this}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(j,k,a){return Point(j.x+(k.x-j.x)*
a,j.y+(k.y-j.y)*a)}},polar:{enumerable:true,writable:false,configurable:false,value:function(j,k){return Point(j*f(k),j*o(k))}}};u=doodle.geom.Point.distance=function(j,k){var a=k.x-j.x,b=k.y-j.y;return s(a*a+b*b)}})();doodle.geom.Point.isPoint=function(c){return typeof c==="object"&&typeof c.x==="number"&&typeof c.y==="number"};
(function(){var c,u=Array(6),q={x:null,y:null},i={a:null,b:null,c:null,d:null,tx:null,ty:null},f=doodle.geom.Point,o=Math.sin,s=Math.cos,j=Math.atan2,k=Math.tan;doodle.geom.Matrix=function(a,b,e,m,w,z){var h={},n=arguments.length;Object.defineProperties(h,c);Object.defineProperties(h,function(){var v=1,p=0,l=0,d=1,r=0,t=0;return{a:{enumerable:true,configurable:false,get:function(){return v},set:function(g){v=g}},b:{enumerable:true,configurable:false,get:function(){return p},set:function(g){p=g}},
c:{enumerable:true,configurable:false,get:function(){return l},set:function(g){l=g}},d:{enumerable:true,configurable:false,get:function(){return d},set:function(g){d=g}},tx:{enumerable:true,configurable:false,get:function(){return r},set:function(g){r=g}},ty:{enumerable:true,configurable:false,get:function(){return t},set:function(g){t=g}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){u[0]=v;u[1]=p;u[2]=l;u[3]=d;u[4]=r;u[5]=t;return u}},id:function(){var g=null;return{enumerable:true,
configurable:false,get:function(){return g===null?this.toString():g},set:function(x){g=x}}}()}}());switch(n){case 6:h.compose(a,b,e,m,w,z);break;case 1:n=arguments[0];a=undefined;if(typeof n==="function")n.call(h);else Array.isArray(n)?h.compose.apply(h,n):h.compose(n.a,n.b,n.c,n.d,n.tx,n.ty)}return h};c={compose:{enumerable:true,writable:false,configurable:false,value:function(a,b,e,m,w,z){this.a=a;this.b=b;this.c=e;this.d=m;this.tx=w;this.ty=z;return this}},toArray:{enumerable:true,writable:false,
configurable:false,value:function(){return this.__toArray().concat()}},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"(a="+this.a+",b="+this.b+",c="+this.c+",d="+this.d+",tx="+this.tx+",ty="+this.ty+")"}},equals:{enumerable:true,writable:false,configurable:false,value:function(a){return this.a===a.a&&this.b===a.b&&this.c===a.c&&this.d===a.d&&this.tx===a.tx&&this.ty===a.ty}},identity:{enumerable:true,writable:false,configurable:false,value:function(){this.a=1;this.c=
this.b=0;this.d=1;this.ty=this.tx=0;return this}},clone:{enumerable:true,writable:false,configurable:false,value:function(){return Matrix(this.a,this.b,this.c,this.d,this.tx,this.ty)}},multiply:{enumerable:true,writable:false,configurable:false,value:function(a){return this.compose(this.a*a.a+this.c*a.b,this.b*a.a+this.d*a.b,this.a*a.c+this.c*a.d,this.b*a.c+this.d*a.d,this.a*a.tx+this.c*a.ty+this.tx,this.b*a.tx+this.d*a.ty+this.ty)}},rotate:{enumerable:true,writable:false,configurable:false,value:function(a){var b=
s(a);a=o(a);i.a=b;i.b=a;i.c=-a;i.d=b;i.tx=0;i.ty=0;return this.multiply(i)}},deltaRotate:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.tx,e=this.ty;this.rotate(a);this.tx=b;this.ty=e;return this}},rotation:{enumerable:true,configurable:false,get:function(){return j(this.b,this.a)},set:function(a){var b=s(a);a=o(a);this.compose(b,a,-a,b,this.tx,this.ty)}},scale:{enumerable:true,writable:false,configurable:false,value:function(a,b){i.a=a;i.b=0;i.c=0;i.d=b;i.tx=0;i.ty=
0;return this.multiply(i)}},deltaScale:{enumerable:true,writable:false,configurable:false,value:function(a,b){var e=this.tx,m=this.ty;this.scale(a,b);this.tx=e;this.ty=m;return this}},translate:{enumerable:true,writable:false,configurable:false,value:function(a,b){this.tx+=a;this.ty+=b;return this}},skew:{enumerable:true,writable:false,configurable:false,value:function(a,b){var e=k(a),m=k(b);i.a=1;i.b=m;i.c=e;i.d=1;i.tx=0;i.ty=0;return this.multiply(i)}},deltaSkew:{enumerable:true,writable:false,
configurable:false,value:function(a,b){var e=this.tx,m=this.ty;this.skew(a,b);this.tx=e;this.ty=m;return this}},add:{enumerable:true,writable:false,configurable:false,value:function(a){this.a+=a.a;this.b+=a.b;this.c+=a.c;this.d+=a.d;this.tx+=a.tx;this.ty+=a.ty;return this}},invert:{enumerable:true,writable:false,configurable:false,value:function(){var a=this.a*this.d-this.b*this.c;return this.compose(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.ty*this.c-this.d*this.tx)/a,-(this.ty*this.a-this.b*this.tx)/
a)}},transformPoint:{enumerable:true,writable:false,configurable:false,value:function(a){return f(this.a*a.x+this.c*a.y+this.tx,this.b*a.x+this.d*a.y+this.ty)}},__transformPoint:{enumerable:false,writable:false,configurable:false,value:function(a){var b=a.x,e=a.y;a.x=this.a*b+this.c*e+this.tx;a.y=this.b*b+this.d*e+this.ty;return a}},deltaTransformPoint:{enumerable:true,writable:false,configurable:false,value:function(a){return f(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)}},__deltaTransformPoint:{enumerable:false,
writable:false,configurable:false,value:function(a){var b=a.x,e=a.y;a.x=this.a*b+this.c*e;a.y=this.b*b+this.d*e;return a}},rotateAroundExternalPoint:{enumerable:true,writable:false,configurable:false,value:function(a,b){var e=s(b),m=o(b);i.a=e;i.b=m;i.c=-m;i.d=e;i.tx=0;i.ty=0;this.translate(-a.x,-a.y);q.x=i.a*this.tx+i.c*this.ty+i.tx;q.y=i.b*this.tx+i.d*this.ty+i.ty;this.tx=q.x;this.ty=q.y;return this.multiply(i).translate(a.x,a.y)}},rotateAroundInternalPoint:{enumerable:true,writable:false,configurable:false,
value:function(a,b){q.x=this.a*a.x+this.c*a.y+this.tx;q.y=this.b*a.x+this.d*a.y+this.ty;return this.rotateAroundExternalPoint(q,b)}},matchInternalPointWithExternal:{enumerable:true,writable:false,configurable:false,value:function(a,b){q.x=this.a*a.x+this.c*a.y+this.tx;q.y=this.b*a.x+this.d*a.y+this.ty;return this.translate(b.x-q.x,b.y-q.y)}},interpolate:{enumerable:true,writable:false,configurable:false,value:function(a,b){this.a+=(a.a-this.a)*b;this.b+=(a.b-this.b)*b;this.c+=(a.c-this.c)*b;this.d+=
(a.d-this.d)*b;this.tx+=(a.tx-this.tx)*b;this.ty+=(a.ty-this.ty)*b;return this}}}})();doodle.geom.Matrix.isMatrix=function(c){return typeof c==="object"&&typeof c.a==="number"&&typeof c.b==="number"&&typeof c.c==="number"&&typeof c.d==="number"&&typeof c.tx==="number"&&typeof c.ty==="number"};
(function(){var c,u=Array(4),q=Math.max,i=Math.min;doodle.geom.Rectangle=function(f,o,s,j){var k={},a=arguments.length;Object.defineProperties(k,c);Object.defineProperties(k,function(){var b=0,e=0,m=0,w=0;return{x:{enumerable:true,configurable:false,get:function(){return b},set:function(z){b=z}},y:{enumerable:true,configurable:false,get:function(){return e},set:function(z){e=z}},width:{enumerable:true,configurable:false,get:function(){return m},set:function(z){m=z}},height:{enumerable:true,configurable:false,
get:function(){return w},set:function(z){w=z}},__toArray:{enumerable:false,writable:false,configurable:false,value:function(){u[0]=b;u[1]=e;u[2]=m;u[3]=w;return u}},id:function(){var z=null;return{enumerable:true,configurable:false,get:function(){return z===null?this.toString():z},set:function(h){z=h}}}()}}());switch(a){case 4:k.compose(f,o,s,j);break;case 1:a=arguments[0];f=undefined;if(typeof a==="function")a.call(k);else Array.isArray(a)?k.compose.apply(k,a):k.compose(a.x,a.y,a.width,a.height)}return k};
c={top:{enumerable:true,configurable:false,get:function(){return this.y},set:function(f){this.y=f;this.height-=f}},right:{enumerable:true,configurable:false,get:function(){return this.x+this.width},set:function(f){this.width=f-this.x}},bottom:{enumerable:true,configurable:false,get:function(){return this.y+this.height},set:function(f){this.height=f-this.y}},left:{enumerable:true,configurable:false,get:function(){return this.x},set:function(f){this.x=f;this.width-=f}},toString:{enumerable:true,writable:false,
configurable:false,value:function(){return"(x="+this.x+",y="+this.y+",w="+this.width+",h="+this.height+")"}},toArray:{enumerable:true,writable:false,configurable:false,value:function(){return this.__toArray().concat()}},compose:{enumerable:true,writable:false,configurable:false,value:function(f,o,s,j){this.x=f;this.y=o;this.width=s;this.height=j;return this}},__compose:{enumerable:false,writable:false,configurable:false,value:function(f){this.compose.apply(this,f.__toArray());return this}},clone:{enumerable:true,
writable:false,configurable:false,value:function(){return Rectangle(this.x,this.y,this.width,this.height)}},offset:{enumerable:true,writable:false,configurable:false,value:function(f,o){this.x+=f;this.y+=o;return this}},inflate:{enumerable:true,writable:false,configurable:false,value:function(f,o){this.x-=f;this.width+=2*f;this.y-=o;this.height+=2*o;return this}},equals:{enumerable:true,writable:false,configurable:false,value:function(f){return this.x===f.x&&this.y===f.y&&this.width===f.width&&this.height===
f.height}},isEmpty:{enumerable:true,writable:false,configurable:false,value:function(){return this.width>=0||this.height>=0}},contains:{enumerable:false,writable:false,configurable:false,value:function(f,o){return f>=this.left&&f<=this.right&&o>=this.top&&o<=this.bottom}},containsPoint:{enumerable:true,writable:false,configurable:false,value:function(f){return this.contains(f.x,f.y)}},containsRect:{enumerable:true,writable:false,configurable:false,value:function(f){var o=f.x+f.width,s=f.y+f.height;
return this.contains(f.x,f.y)&&this.contains(o,f.y)&&this.contains(o,s)&&this.contains(f.x,s)}},intersects:{enumerable:true,writable:false,configurable:false,value:function(f){var o=f.x+f.width,s=f.y+f.height;return this.contains(f.x,f.y)||this.contains(o,f.y)||this.contains(o,s)||this.contains(f.x,f.bot)}},intersection:{enumerable:true,writable:false,configurable:false,value:function(f){var o=Rectangle(0,0,0,0);if(this.intersects(f)){o.left=q(this.left,f.x);o.top=q(this.top,f.y);o.right=i(this.right,
f.x+f.width);o.bottom=i(this.bottom,f.y+f.height)}return o}},__intersection:{enumerable:false,writable:false,configurable:false,value:function(f){if(this.intersects(f)){this.left=q(this.left,f.x);this.top=q(this.top,f.y);this.right=i(this.right,f.x+f.width);this.bottom=i(this.bottom,f.y+f.height)}return this}},union:{enumerable:true,writable:false,configurable:false,value:function(f){var o=Rectangle(0,0,0,0);o.left=i(this.left,f.x);o.top=i(this.top,f.y);o.right=q(this.right,f.x+f.width);o.bottom=
q(this.bottom,f.y+f.height);return o}},__union:{enumerable:false,writable:false,configurable:false,value:function(f){var o=i(this.left,f.x),s=i(this.top,f.y),j=q(this.right,f.x+f.width);f=q(this.bottom,f.y+f.height);this.left=o;this.top=s;this.right=j;this.bottom=f;return this}}}})();doodle.geom.Rectangle.isRectangle=function(c){return typeof c==="object"&&typeof c.x==="number"&&typeof c.y==="number"&&typeof c.width==="number"&&typeof c.height==="number"};
(function(){var c,u,q=doodle.events.Event.CAPTURING_PHASE,i=doodle.events.Event.AT_TARGET,f=doodle.events.Event.BUBBLING_PHASE,o=Array.prototype.indexOf,s=Array.prototype.splice;doodle.EventDispatcher=function(j){var k={};Object.defineProperties(k,c);Object.defineProperties(k,{id:function(){var a=null;return{enumerable:true,configurable:false,get:function(){return a===null?this.toString():a},set:function(b){a=b}}}(),eventListeners:function(){var a={};return{enumerable:true,configurable:false,get:function(){return a}}}()});
typeof j==="function"&&j.call(k);return k};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object EventDispatcher]"}},addEventListener:{enumerable:true,writable:false,configurable:false,value:function(j,k,a){a=a===undefined?false:a;var b=this.eventListeners;b.hasOwnProperty(j)||(b[j]={capture:[],bubble:[]});b[j][a?"capture":"bubble"].push(k);u.indexOf(this)===-1&&u.push(this)}},removeEventListener:{enumerable:true,writable:false,configurable:false,value:function(j,
k,a){a=a===undefined?false:a;var b=this.eventListeners,e=b.hasOwnProperty(j)?b[j]:false;if(e){a=e[a?"capture":"bubble"];s.call(a,o.call(a,k),1);e.capture.length===0&&e.bubble.length===0&&delete b[j];if(Object.keys(b).length===0){j=u;s.call(j,o.call(j,this),1)}}}},handleEvent:{enumerable:true,writable:false,configurable:false,value:function(j){var k=j.eventPhase===q?"capture":"bubble",a=this.eventListeners[j.type],b=0,e;if((a=a&&a[k])&&a.length>0){j.__setCurrentTarget(this);b=a.length;for(e=0;e<b;e+=
1){k=a[e].call(this,j);if(k===false||j.returnValue===false)j.__cancel||j.stopPropagation();if(j.__cancelNow)break}}return b>0?true:false}},dispatchEvent:{enumerable:true,writable:false,configurable:false,value:function(j){var k,a=j.type,b=Object.prototype.hasOwnProperty,e=b.call(this.eventListeners,a),m,w=[];if(j.__cancel)return false;j.target||j.__setTarget(this);k=j.target;for(m=k.parent||null;m;){e||(e=b.call(m.eventListeners,a));w.push(m);m=m.parent}if(!e)return true;j.__setEventPhase(q);for(b=
a=w.length;b--;){w[b].handleEvent(j);if(j.__cancel)return true}j.__setEventPhase(i);k.handleEvent(j);if(j.__cancel)return true;if(!j.bubbles||j.cancelBubble)return true;j.__setEventPhase(f);for(b=0;b<a;b+=1){w[b].handleEvent(j);if(j.__cancel||j.cancelBubble)break}return true}},broadcastEvent:{enumerable:true,writable:false,configurable:false,value:function(j){var k=j.type,a=Object.prototype.hasOwnProperty,b=u,e=b.length;if(j.__cancel)throw Error(this+".broadcastEvent: Can not dispatch a cancelled event.");
for(j.target||j.__setTarget(this);e--;){a.call(b[e].eventListeners,k)&&b[e].handleEvent(j);if(j.__cancel)break}return true}},hasEventListener:{enumerable:true,writable:false,configurable:false,value:function(j){return this.eventListeners.hasOwnProperty(j)}},willTrigger:{enumerable:true,writable:false,configurable:false,value:function(j){if(this.eventListeners.hasOwnProperty(j))return true;for(var k=this.children,a=k?k.length:0;a--;)if(k[a].willTrigger(j))return true;return false}}};u=doodle.EventDispatcher.dispatcher_queue=
[]})();doodle.EventDispatcher.isEventDispatcher=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object EventDispatcher]")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c=0,u,q=doodle.events.Event(doodle.events.Event.ADDED,true),i=doodle.events.Event(doodle.events.Event.REMOVED,true),f=doodle.geom.Point,o=doodle.geom.Matrix,s=doodle.geom.Rectangle,j=doodle.utils.create_scene_path,k=Math.PI;doodle.Node=function(a){var b=Object.create(doodle.EventDispatcher());Object.defineProperties(b,u);Object.defineProperties(b,{id:function(){var e=typeof a==="string"?a:"node"+String("000"+c).slice(-3);c+=1;return{enumerable:true,configurable:true,get:function(){return e},
set:function(m){e=m}}}(),root:function(){var e=null;return{enumerable:true,configurable:true,get:function(){return e},set:function(m){e=m}}}(),parent:function(){var e=null;return{enumerable:true,configurable:true,get:function(){return e},set:function(m){e=m}}}(),children:function(){var e=[];return{enumerable:true,configurable:false,get:function(){return e}}}(),transform:function(){var e=o(1,0,0,1,0,0);return{enumerable:true,configurable:false,get:function(){return e},set:function(m){e=m}}}(),visible:function(){var e=
true;return{enumerable:true,configurable:true,get:function(){return e},set:function(m){e=m}}}(),alpha:function(){var e=1;return{enumerable:true,configurable:true,get:function(){return e},set:function(m){e=m>1?1:m<0?0:m}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(e){return this.__getBounds(e).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var e=s(0,0,0,0);return function(m){for(var w=null,z,h=this.children,n=h.length;n--;){z=
h[n].__getBounds(m);if(z!==null)if(w===null)w=e.__compose(z);else w.__union(z)}return w}}()}});if(typeof a==="function"){a.call(b);a=undefined}return b};u={x:{enumerable:true,configurable:false,get:function(){return this.transform.tx},set:function(a){this.transform.tx=a}},y:{enumerable:true,configurable:false,get:function(){return this.transform.ty},set:function(a){this.transform.ty=a}},rotate:{enumerable:true,configurable:false,value:function(a){this.transform.rotate(a*k/180)}},rotation:{enumerable:true,
configurable:true,get:function(){return this.transform.rotation*180/k},set:function(a){this.transform.rotation=a*k/180}},scaleX:{enumerable:true,configurable:false,get:function(){return this.transform.a},set:function(a){this.transform.a=a}},scaleY:{enumerable:true,configurable:false,get:function(){return this.transform.d},set:function(a){this.transform.d=a}},context:{enumerable:true,configurable:true,get:function(){for(var a=this.parent;a;){if(a.context)return a.context;a=a.parent}return null}},__allTransforms:{enumerable:false,
configurable:false,get:function(){var a=o(1,0,0,1,0,0);return function(){var b=this.parent;for(a.compose.apply(a,this.transform.__toArray());b;){a.multiply(b.transform);b=b.parent}return a}}()},toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Node]"}},addChildAt:{enumerable:true,writable:false,configurable:false,value:function(a,b){var e=this.children,m=this.root,w=a.parent;if(e.indexOf(a)!==-1)return false;w!==null&&w!==this&&a.parent.removeChild(a);a.parent=
this;e.splice(b,0,a);if(m&&a.root!==m){m.__sortAllChildren();e=j(a,[]);for(w=e.length;w--;){a=e[w];a.root=m;a.dispatchEvent(q.__setTarget(null))}}return a}},addChild:{enumerable:true,writable:false,configurable:false,value:function(a){return this.addChildAt(a,this.children.length)}},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(a){a=this.children.splice(a,1)[0];var b=j(a),e=b.length,m=e;if(this.root){for(;e--;)b[e].dispatchEvent(i.__setTarget(null));for(;m--;)b[m].root=
null}a.parent=null;this.root&&this.root.__sortAllChildren();return a}},removeChild:{enumerable:false,writable:false,configurable:false,value:function(a){return this.removeChildAt(this.children.indexOf(a))}},removeChildById:{enumerable:true,writable:false,configurable:false,value:function(a){return this.removeChild(this.getChildById(a))}},removeAllChildren:{enumerable:true,writable:false,configurable:false,value:function(){var a=this.children,b=this.root,e=j(this,[]),m=a.length,w,z;e.pop();w=z=e.length;
if(b)for(;w--;)e[w].dispatchEvent(i.__setTarget(null));for(;z--;)e[z].root=null;for(;m--;)a[m].parent=null;a.length=0;b&&b.__sortAllChildren()}},getChildById:{enumerable:true,writable:false,configurable:false,value:function(a){for(var b=this.children,e=b.length,m=0;m<e;m++)if(b[m].id===a)return b[m]}},setChildIndex:{enumerable:true,writable:false,configurable:false,value:function(a,b){var e=this.children,m=e.indexOf(a);e.splice(m,1);e.splice(b,0,a);this.root&&this.root.__sortAllChildren()}},swapChildrenAt:{enumerable:true,
writable:false,configurable:false,value:function(a,b){var e=this.children,m;m=e.splice(a,1,undefined)[0];e.splice(a,1,e.splice(b,1,undefined)[0]);e[e.indexOf(undefined)]=m;this.root&&this.root.__sortAllChildren()}},swapChildren:{enumerable:true,writable:false,configurable:false,value:function(a,b){var e=this.children;this.swapChildrenAt(e.indexOf(a),e.indexOf(b))}},swapDepths:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.parent,e;e=b.children;b.swapChildrenAt(e.indexOf(this),
e.indexOf(a))}},swapDepthAt:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.parent;b.swapChildrenAt(b.children.indexOf(this),a)}},contains:{enumerable:true,writable:false,configurable:false,value:function(a){return j(this,[]).indexOf(a)!==-1?true:false}},localToGlobal:{enumerable:true,writable:false,configurable:false,value:function(a){var b=this.parent;for(a=this.transform.transformPoint(a);b;){b.transform.__transformPoint(a);b=b.parent}return a}},__localToGlobal:{enumerable:false,
writable:false,configurable:false,value:function(a){for(var b=this;b;){b.transform.__transformPoint(a);b=b.parent}return a}},globalToLocal:{enumerable:true,writable:false,configurable:false,value:function(a){var b={x:0,y:0};this.__localToGlobal(b);return f(a.x-b.x,a.y-b.y)}},__globalToLocal:{enumerable:false,writable:false,configurable:false,value:function(a){var b={x:0,y:0};this.__localToGlobal(b);a.x-=b.x;a.y-=b.y;return a}}}})();
doodle.Node.isNode=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object Node]")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=doodle.geom.Rectangle;doodle.Sprite=function(q){var i=Object.create(doodle.Node(typeof q==="string"?q:undefined));Object.defineProperties(i,c);Object.defineProperties(i,function(){var f=[];return{graphics:{enumerable:false,configurable:false,value:Object.create(doodle.Graphics.call(i,f))},width:function(){var o=0;return{enumerable:true,configurable:false,get:function(){return o},set:function(s){o=s}}}(),height:function(){var o=0;return{enumerable:true,configurable:false,get:function(){return o},
set:function(s){o=s}}}(),getBounds:{enumerable:true,writable:true,configurable:false,value:function(o){return this.__getBounds(o).clone()}},__getBounds:{enumerable:false,writable:true,configurable:false,value:function(){var o=u(0,0,0,0);return function(s){var j=this.children,k=j.length,a,b=this.width,e=this.height,m=this.graphics;a={x:m.__minX,y:m.__minY};var w={x:m.__minX+b,y:m.__minY};b={x:m.__minX+b,y:m.__minY+e};e={x:m.__minX,y:m.__minY+e};m=Math.min;var z=Math.max;this.__localToGlobal(a);this.__localToGlobal(w);
this.__localToGlobal(b);this.__localToGlobal(e);s.__globalToLocal(a);s.__globalToLocal(w);s.__globalToLocal(b);s.__globalToLocal(e);o.left=m(a.x,w.x,b.x,e.x);o.right=z(a.x,w.x,b.x,e.x);o.top=m(a.y,w.y,b.y,e.y);for(o.bottom=z(a.y,w.y,b.y,e.y);k--;){a=j[k].__getBounds(s);a!==null&&o.__union(a)}return o}}()},hitTestObject:{enumerable:true,writable:true,configurable:false,value:function(o){return this.getBounds(this).intersects(o.getBounds(this))}},hitTestPoint:{enumerable:true,writable:true,configurable:false,
value:function(o){return this.getBounds(this).containsPoint(this.globalToLocal(o))}},__draw:{enumerable:false,writable:false,configurable:false,value:function(o){for(var s=0,j=f.length;s<j;s++)f[s].call(i,o)}}}}());typeof q==="function"&&q.call(i);return i};c={rotation:function(){var q=180/Math.PI,i=Math.PI/180;return{enumerable:true,configurable:false,get:function(){return this.transform.rotation*q},set:function(f){this.transform.rotation=f*i}}}(),toString:{enumerable:false,writable:false,configurable:false,
value:function(){return"[object Sprite]"}},compose:{enumerable:false,writable:false,configurable:false,value:function(q,i,f,o){this.x=q;this.y=i;this.width=f;this.height=o;return this}}}})();doodle.Sprite.isSprite=function(c){if(typeof c==="object")for(;c;)if(c.toLocaleString()==="[object Sprite]")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=doodle.utils.hex_to_rgb_str,q=doodle.utils.get_element,i=doodle.events.Event,f=doodle.GradientType.LINEAR,o=doodle.GradientType.RADIAL;doodle.Graphics=function(s){var j={},k=this,a=0,b=0,e=1,m=doodle.LineCap.BUTT,w=doodle.LineJoin.MITER,z=10;Object.defineProperties(j,c);Object.defineProperties(j,{__minX:{enumerable:false,configurable:false,value:0},__minY:{enumerable:false,configurable:false,value:0},__maxX:{enumerable:false,configurable:false,value:0},__maxY:{enumerable:false,
configurable:false,value:0},lineWidth:{enumerable:true,configurable:false,get:function(){return e}},lineCap:{enumerable:true,configurable:false,get:function(){return m}},lineJoin:{enumerable:true,configurable:false,get:function(){return w}},lineMiter:{enumerable:true,configurable:false,get:function(){return z}},draw:{enumerable:false,writable:false,configurable:false,value:function(h){s.push(h)}},clear:{enumerable:false,writable:false,configurable:false,value:function(){s.length=0;k.width=0;a=b=this.__minX=
this.__minY=this.__maxX=this.__maxY=k.height=0}},rect:{enumerable:false,writable:false,configurable:false,value:function(h,n,v,p){this.__minX=Math.min(0,h,this.__minX);this.__minY=Math.min(0,n,this.__minY);this.__maxX=Math.max(0,h,h+v,this.__maxX);this.__maxY=Math.max(0,n,n+p,this.__maxY);k.width=-this.__minX+this.__maxX;k.height=-this.__minY+this.__maxY;s.push(function(l){l.beginPath();l.rect(h,n,v,p);l.closePath();l.stroke()})}},circle:{enumerable:false,writable:false,configurable:false,value:function(h,
n,v){this.__minX=Math.min(0,-v+h,this.__minX);this.__minY=Math.min(0,-v+n,this.__minY);this.__maxX=Math.max(0,h,h+v,this.__maxX);this.__maxY=Math.max(0,n,n+v,this.__maxY);k.width=-this.__minX+this.__maxX;k.height=-this.__minY+this.__maxY;s.push(function(p){p.beginPath();p.arc(h,n,v,0,6.283185307179586,true);p.closePath();p.stroke()})}},ellipse:{enumerable:false,writable:false,configurable:false,value:function(h,n,v,p){p=p===undefined?v:p;var l=v/2,d=p/2,r=0.5522847498*l,t=0.5522847498*d;this.__minX=
Math.min(0,-l+h,this.__minX);this.__minY=Math.min(0,-d+n,this.__minY);this.__maxX=Math.max(0,h,h+l,this.__maxX);this.__maxY=Math.max(0,n,n+d,this.__maxY);k.width=-this.__minX+this.__maxX;k.height=-this.__minY+this.__maxY;s.push(function(g){g.beginPath();g.moveTo(h+l,n);g.bezierCurveTo(h+l,n-t,h+r,n-d,h,n-d);g.bezierCurveTo(h-r,n-d,h-l,n-t,h-l,n);g.bezierCurveTo(h-l,n+t,h-r,n+d,h,n+d);g.bezierCurveTo(h+r,n+d,h+l,n+t,h+l,n);g.closePath();g.stroke()})}},roundRect:{enumerable:false,writable:false,configurable:false,
value:function(h,n,v,p,l,d){l=l===undefined?0:l;d=d===undefined?0:d;var r=h+v,t=r-l,g=h+l,x=n+p,A=x-d,G=n+d;this.__minX=Math.min(0,h,this.__minX);this.__minY=Math.min(0,n,this.__minY);this.__maxX=Math.max(0,h,h+v,this.__maxX);this.__maxY=Math.max(0,n,n+p,this.__maxY);k.width=-this.__minX+this.__maxX;k.height=-this.__minY+this.__maxY;s.push(function(B){B.beginPath();B.moveTo(g,n);B.beginPath();B.lineTo(t,n);B.quadraticCurveTo(r,n,r,G);B.lineTo(r,A);B.quadraticCurveTo(r,x,t,x);B.lineTo(g,x);B.quadraticCurveTo(h,
x,h,A);B.lineTo(h,G);B.quadraticCurveTo(h,n,g,n);B.closePath();B.stroke()})}},moveTo:{enumerable:false,writable:false,configurable:false,value:function(h,n){s.push(function(v){v.moveTo(h,n)});a=h;b=n}},lineTo:{enumerable:false,writable:false,configurable:false,value:function(h,n){this.__minX=Math.min(0,h,a,this.__minX);this.__minY=Math.min(0,n,b,this.__minY);this.__maxX=Math.max(0,h,a,this.__maxX);this.__maxY=Math.max(0,n,b,this.__maxY);k.width=this.__maxX-this.__minX;k.height=this.__maxY-this.__minY;
s.push(function(v){v.lineTo(h,n)});a=h;b=n}},curveTo:{enumerable:false,writable:false,configurable:false,value:function(h,n){var v=a,p=b,l=h.x,d=h.y,r=n.x,t=n.y,g,x=0,A=0;g=(v-l)/(v-2*l+r);if(0<=g&&g<=1)x=(1-g)*(1-g)*v+2*(1-g)*g*l+g*g*r;g=(p-d)/(p-2*d+t);if(0<=g&&g<=1)A=(1-g)*(1-g)*p+2*(1-g)*g*d+g*g*t;this.__minX=Math.min(0,v,x,r,this.__minX);this.__minY=Math.min(0,p,A,t,this.__minY);this.__maxX=Math.max(0,v,x,r,this.__maxX);this.__maxY=Math.max(0,p,A,t,this.__maxY);k.width=-this.__minX+this.__maxX;
k.height=-this.__minY+this.__maxY;s.push(function(G){G.quadraticCurveTo(l,d,r,t)});a=r;b=t}},bezierCurveTo:{enumerable:false,writable:false,configurable:false,value:function(h,n,v){var p=Math.pow,l=Math.max,d=Math.min,r=a,t=b,g=h.x,x=h.y,A=n.x,G=n.y,B=v.x,H=v.y,E,J=v=n=0,K=0;for(h=0.1;h<1;h+=0.1){E=p(1-h,3)*r+3*p(1-h,2)*h*g+3*p(1-h,1)*p(h,2)*A+p(h,3)*B;if(E>n)n=E;if(E<v)v=E;E=p(1-h,3)*t+3*p(1-h,2)*h*x+3*p(1-h,1)*p(h,2)*G+p(h,3)*H;if(E>J)J=E;if(E<K)K=E}this.__minX=d(0,r,v,B,this.__minX);this.__minY=
d(0,t,K,H,this.__minY);this.__maxX=l(0,r,n,B,this.__maxX);this.__maxY=l(0,t,J,H,this.__maxY);k.width=-this.__minX+this.__maxX;k.height=-this.__minY+this.__maxY;s.push(function(O){O.bezierCurveTo(g,x,A,G,B,H)});a=B;b=H}},beginFill:{enumerable:false,writable:false,configurable:false,value:function(h,n){n=n===undefined?1:n;s.push(function(v){v.fillStyle=u(h,n)})}},beginGradientFill:{enumerable:true,writable:false,configurable:false,value:function(h,n,v,p,l,d){s.push(function(r){var t=doodle.utils.hex_to_rgb_str,
g,x=p.length,A=0;if(h===f)g=r.createLinearGradient(n.x,n.y,v.x,v.y);else if(h===o)g=r.createRadialGradient(n.x,n.y,n.radius,v.x,v.y,v.radius);else throw new TypeError(k.id+" Graphics.beginGradientFill(*type*, point1, point2, ratios, colors, alphas): Unknown gradient type.");for(;A<x;A+=1)g.addColorStop(p[A],t(l[A],d[A]));r.fillStyle=g})}},beginPatternFill:{enumerable:true,writable:false,configurable:false,value:function(h,n){var v=null,p;p=doodle.Pattern;n=n===undefined?p.REPEAT:n;if(typeof h==="string")if(h[0]===
"#")h=q(h);else(function(){var l=encodeURI(h);h=new Image;h.src=l})();if(h.complete)v=h;else{h.onload=function(){v=h;k.dispatchEvent(i(i.LOAD))};p=function(){throw new URIError(k.id+"Graphics.beginPatternFill(*image*,repeat): Unable to load "+h.src);};h.onerror=p;h.onabort=p}s.push(function(l){l.fillStyle=v?l.createPattern(v,n):"rgba(0,0,0,0)"})}},lineStyle:{enumerable:true,writable:false,configurable:false,value:function(h,n,v,p,l,d){h=h===undefined?1:h;n=n===undefined?"#000000":n;v=v===undefined?
1:v;p=p===undefined?doodle.LineCap.BUTT:p;l=l===undefined?doodle.LineJoin.MITER:l;d=d===undefined?10:d;e=h;w=l;m=p;z=d;if(typeof n==="string"||typeof n==="number")n=u(n,v);else throw new TypeError(k+" Graphics.lineStyle(thickness,*color*,alpha,caps,joints,miterLimit): Color must be a hex value.");s.push(function(r){r.lineWidth=e;r.strokeStyle=n;r.lineCap=m;r.lineJoin=w;r.miterLimit=z})}},beginPath:{enumerable:false,writable:false,configurable:false,value:function(){s.push(function(h){h.beginPath();
h.moveTo(a,b)})}},closePath:{enumerable:false,writable:false,configurable:false,value:function(){s.push(function(h){h.closePath();h.stroke()});b=a=0}},endFill:{enumerable:false,writable:false,configurable:false,value:function(){s.push(function(h){h.fill()})}},stroke:{enumerable:false,writable:false,configurable:false,value:function(){s.push(function(h){h.stroke()});b=a=0}}});return j};c={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Graphics]"}}}})();
(function(){var c,u=/^url\((.*)\)/,q=doodle.geom.Rectangle,i=doodle.utils.rgb_str_to_hex,f=doodle.utils.hex_to_rgb_str,o=doodle.utils.get_element,s=doodle.utils.get_element_property,j=doodle.utils.set_element_property;doodle.ElementNode=function(k,a){var b=Object.create(doodle.Node(typeof a==="string"?a:undefined));Object.defineProperties(b,c);Object.defineProperties(b,function(){var e=null,m=b.id,w=b.alpha,z=b.visible,h=0,n=0,v=null,p=null,l="repeat";return{element:{enumerable:true,configurable:true,
get:function(){return e},set:function(d){if(d===null){if(e!==null){typeof this.__removeDomElement==="function"&&this.__removeDomElement(e);p=v=null;l="repeat";if(!this.parent)n=h=0}e=null}else{e=d=o(d);this.__addDomElement(e);if(d=s(e,"id"))m=d;else this.id=m;l=s(e,"backgroundRepeat")||l;v=(d=s(e,"backgroundColor",false,false))?i(d):v;d=s(e,"backgroundImage");p=(d=!d||d==="none"?null:p.match(u))?d[1]:p}}},id:{enumerable:true,configurable:true,get:function(){return m},set:function(d){m=j(this.element,
"id",d,"html")}},width:{enumerable:true,configurable:true,get:function(){return h},set:function(d){j(this.element,"width",d+"px");h=d}},height:{enumerable:true,configurable:true,get:function(){return n},set:function(d){j(this.element,"height",d+"px");n=d}},backgroundColor:{enumerable:true,configurable:true,get:function(){return v},set:function(d){if(typeof d==="number")d=f(d);j(this.element,"backgroundColor",d);v=i(s(this.element,"backgroundColor"))}},backgroundImage:{enumerable:true,configurable:true,
get:function(){return p},set:function(d){if(d){if(typeof d==="string"){if(d[0]==="#")d=o(d).src}else if(d&&d.tagName==="IMG")d=d.src;u.test(d)||(d="url("+encodeURI(d)+")");p=j(this.element,"backgroundImage",d)}else p=j(this.element,"backgroundImage",null)}},backgroundRepeat:{enumerable:true,configurable:true,get:function(){return l},set:function(d){l=j(this.element,"backgroundRepeat",d)}},alpha:{enumerable:true,configurable:true,get:function(){return w},set:function(d){j(this.element,"opacity",d)}},
visible:{enumerable:true,configurable:true,get:function(){return z},set:function(d){d?j(this.element,"visibility","visible"):j(this.element,"visibility","hidden");z=d}},__addDomElement:{enumerable:false,configurable:true,value:function(d){var r=s(d,"width","int")||d.width;d=s(d,"height","int")||d.height;if(typeof r==="number")h=r;if(typeof d==="number")n=d}},__getBounds:{enumerable:true,configurable:true,value:function(){var d=q(0,0,0,0);return function(r){var t=this.children,g=t.length,x,A=this.width,
G=this.height;x={x:0,y:0};var B={x:A,y:0};A={x:A,y:G};G={x:0,y:G};var H=Math.min,E=Math.max;this.__localToGlobal(x);this.__localToGlobal(B);this.__localToGlobal(A);this.__localToGlobal(G);r.__globalToLocal(x);r.__globalToLocal(B);r.__globalToLocal(A);r.__globalToLocal(G);d.left=H(x.x,B.x,A.x,G.x);d.right=E(x.x,B.x,A.x,G.x);d.top=H(x.y,B.y,A.y,G.y);for(d.bottom=E(x.y,B.y,A.y,G.y);g--;){x=t[g].__getBounds(r);x!==null&&d.__union(x)}return d}}()}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]===
"function"){arguments[0].call(b);k=undefined}else b.element=k;break;case 2:if(k)b.element=k;break;default:throw new SyntaxError("[object ElementNode](element, id): Invalid number of parameters.");}return b};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object ElementNode]"}}}})();doodle.ElementNode.isElementNode=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object ElementNode]")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=0,q=doodle.utils.set_element_property;doodle.Layer=function(i,f){var o=typeof i==="string"?i:"layer"+String("00"+u).slice(-2);o=Object.create(doodle.ElementNode(undefined,o));Object.defineProperties(o,c);Object.defineProperties(o,function(){var s=0,j=0,k=null;return{width:{enumerable:true,configurable:true,get:function(){return s},set:function(a){s=q(this.element,"width",a,"html")}},height:{enumerable:true,configurable:true,get:function(){return j},set:function(a){j=q(this.element,
"height",a,"html")}},context:{enumerable:true,configurable:true,get:function(){return k}},__addDomElement:{enumerable:false,writable:false,value:function(a){q(a,"position","absolute");if(this.parent){this.width=this.parent.width;this.height=this.parent.height}k=a.getContext("2d")}},__removeDomElement:{enumerable:false,writable:false,value:function(){k=null}}}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(o);i=undefined}break;case 2:o.element=
f;break;default:throw new SyntaxError("[object Layer](id, element): Invalid number of parameters.");}if(o.element===null)o.element=document.createElement("canvas");u+=1;return o};c={toString:{enumerable:true,writable:false,configurable:false,value:function(){return"[object Layer]"}},__getBounds:{enumerable:true,configurable:true,value:function(){var i=doodle.geom.Rectangle(0,0,0,0);return function(){return i.compose(0,0,this.width,this.height)}}()}}})();
doodle.Layer.isLayer=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object Layer]")return true;else c=Object.getPrototypeOf(c);return false};
(function(){var c,u=0,q,i,f,o,s,j,k,a=doodle.utils.create_scene_path,b=doodle.Layer.isLayer,e=doodle.utils.get_element,m=doodle.utils.get_element_property,w=doodle.utils.set_element_property,z=doodle.Layer,h=doodle.events.Event(doodle.events.Event.ENTER_FRAME),n=doodle.events.MouseEvent(""),v=doodle.events.KeyboardEvent("");doodle.Display=function(p){var l,d;if(p&&typeof p!=="function"){p=e(p);d=m(p,"id")}d=typeof d==="string"?d:"display"+String("00"+u++).slice(-2);l=Object.create(doodle.ElementNode(undefined,
d));Object.defineProperties(l,c);Object.defineProperties(l,function(){function r(y){C(y,P,K,K.length,O,R,L)}function t(y){var D,I;O=D=F?y.offsetX:y.clientX-H.offsetLeft;R=I=F?y.offsetY:y.clientY-H.offsetTop;M(y,P,K,K.length,D,I,L)}function g(y){N(y,P,K,E,E.length,L)}function x(y){S(y,V,L)}function A(){T(E,E.length,J,J.length,U,K,K.length,L)}var G=0,B=0,H=null,E=l.children,J=doodle.EventDispatcher.dispatcher_queue,K=[],O=0,R=0,F=document.createEvent("MouseEvent").offsetX!==undefined,L=l,C=o,M=s,N=
j,S=k,T=q,U=h,P=n,V=v;document.addEventListener(doodle.events.KeyboardEvent.KEY_PRESS,x,false);document.addEventListener(doodle.events.KeyboardEvent.KEY_DOWN,x,false);document.addEventListener(doodle.events.KeyboardEvent.KEY_UP,x,false);return{root:{enumerable:true,writable:false,configurable:false,value:L},mouseX:{enumerable:true,configurable:false,get:function(){return O}},mouseY:{enumerable:true,configurable:false,get:function(){return R}},width:{get:function(){return G},set:function(y){var D=
E.length;w(this.element,"width",y+"px");for(G=y;D--;)E[D].width=y;return y}},height:{get:function(){return B},set:function(y){var D=E.length;w(this.element,"height",y+"px");for(B=y;D--;)E[D].height=y;return y}},__addDomElement:{enumerable:false,writable:false,value:function(y){w(y,"position","relative");var D=m(y,"width","int",false)||y.width,I=m(y,"height","int",false)||y.height;if(typeof D==="number")this.width=D;if(typeof I==="number")this.height=I;y.addEventListener(doodle.events.MouseEvent.MOUSE_MOVE,
t,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_OUT,g,false);y.addEventListener(doodle.events.MouseEvent.CLICK,r,false);y.addEventListener(doodle.events.MouseEvent.DOUBLE_CLICK,r,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_DOWN,r,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_UP,r,false);y.addEventListener(doodle.events.MouseEvent.CONTEXT_MENU,r,false);y.addEventListener(doodle.events.MouseEvent.MOUSE_WHEEL,r,false);H=y}},__removeDomElement:{enumerable:false,writable:false,
value:function(y){y.removeEventListener(doodle.events.MouseEvent.MOUSE_MOVE,t,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_OUT,g,false);y.removeEventListener(doodle.events.MouseEvent.CLICK,r,false);y.removeEventListener(doodle.events.MouseEvent.DOUBLE_CLICK,r,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_DOWN,r,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_UP,r,false);y.removeEventListener(doodle.events.MouseEvent.CONTEXT_MENU,r,false);y.removeEventListener(doodle.events.MouseEvent.MOUSE_WHEEL,
r,false);H=null}},allChildren:{enumerable:true,configurable:false,get:function(){return K}},__sortAllChildren:{enumerable:false,configurable:false,value:function(){a(this,K,true).reverse()}},getNodesUnderPoint:{enumerable:true,configurable:false,value:function(y){var D=[],I=K,Q=I.length,W=y.x;y=y.y;for(var X;Q--;){X=I[Q];X.__getBounds(this).contains(W,y)&&D.push(X)}return D}},addChildAt:{enumerable:true,configurable:false,value:function(){var y=L.addChildAt;return function(D,I){D.width=this.width;
D.height=this.height;this.element.appendChild(D.element);return y.call(this,D,I)}}()},removeChildAt:{enumerable:true,writable:false,configurable:false,value:function(){var y=L.removeChildAt;return function(D){this.element.removeChild(E[D].element);return y.call(this,D)}}()},swapChildrenAt:{enumerable:true,writable:false,configurable:false,value:function(){var y=L.swapChildrenAt;return function(D,I){D>I?this.element.insertBefore(E[I].element,E[D].element):this.element.insertBefore(E[D].element,E[I].element);
return y.call(this,D,I)}}()},frameRate:function(){var y=false,D;return{get:function(){return y},set:function(I){if(I===0||I===false){y=false;D!==undefined&&clearInterval(D)}else if(I!==y){D!==undefined&&clearInterval(D);D=setInterval(A,1E3/I);y=I}}}}()}}());switch(arguments.length){case 0:break;case 1:if(typeof arguments[0]==="function"){arguments[0].call(p);p=undefined}else l.element=p;break;default:throw new SyntaxError("[object Display](element): Invalid number of parameters.");}q(l.children,l.children.length,
doodle.EventDispatcher.dispatcher_queue,doodle.EventDispatcher.dispatcher_queue.length,h,l.allChildren,l.allChildren.length,l);return l};c={parent:{enumerable:true,writable:false,configurable:false,value:null},toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Display]"}},addLayer:{value:function(p){return this.addChild(z(p))}},removeLayer:{value:function(p){return this.removeChildById(p)}},__getBounds:{enumerable:false,configurable:true,value:function(){var p=
doodle.geom.Rectangle(0,0,0,0);return function(){return p.compose(0,0,this.width,this.height)}}()}};q=function(){var p=0;return function(l,d,r,t,g,x,A){for(i(l,d);t--;)r[t].eventListeners.hasOwnProperty("enterFrame")&&r[t].handleEvent(g.__setTarget(r[t]));f(x,A);p++}}();i=function(p,l){for(var d;l--;){d=p[l].context;d.save();d.setTransform(1,0,0,1,0,0);d.clearRect(0,0,p[l].width,p[l].height);d.restore()}};f=function(p){for(var l,d=p.length,r,t=1;t<d;t++){l=p[t];if((r=l.context)&&l.visible){r.save();
r.transform.apply(r,l.__allTransforms.__toArray());if(!b(l))if(l.alpha!==1)r.globalAlpha=l.alpha;typeof l.__draw==="function"&&l.__draw(r);r.restore()}}};o=function(p,l,d,r,t,g,x){for(;r--;)if(d[r].__getBounds(x).contains(t,g)){d[r].dispatchEvent(l.__copyMouseEventProperties(p,null));return true}return false};s=function(p,l,d,r,t,g,x){for(var A;r--;){A=d[r];if(A.__getBounds(x).contains(t,g)){if(!A.__pointInBounds){A.__pointInBounds=true;A.dispatchEvent(l.__copyMouseEventProperties(p,null,"mouseover"));
A.dispatchEvent(l.__copyMouseEventProperties(p,null,"mouseenter"));return true}A.dispatchEvent(l.__copyMouseEventProperties(p,null));return true}else if(A.__pointInBounds){A.__pointInBounds=false;A.dispatchEvent(l.__copyMouseEventProperties(p,null,"mouseout"));A.dispatchEvent(l.__copyMouseEventProperties(p,null,"mouseleave"));return true}}};j=function(p,l,d,r,t,g){if(t===0)g.__pointInBounds=false;else{g=r[t-1];for(t=d.length;t--;)d[t].__pointInBounds=false}g.dispatchEvent(l.__copyMouseEventProperties(p,
null,"mouseout"));g.dispatchEvent(l.__copyMouseEventProperties(p,null,"mouseleave"));return true};k=function(p,l,d){d.broadcastEvent(l.__copyKeyboardEventProperties(p,null));return true}})();doodle.Display.isDisplay=function(c){if(typeof c==="object")for(;c;)if(c.toString()==="[object Display]")return true;else c=Object.getPrototypeOf(c);return false};
Object.defineProperty(doodle,"FontStyle",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{NORMAL:{enumerable:true,writable:false,configurable:false,value:"normal"},ITALIC:{enumerable:true,writable:false,configurable:false,value:"italic"},OBLIQUE:{enumerable:true,writable:false,configurable:false,value:"oblique"}})});
Object.defineProperty(doodle,"FontVariant",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{NORMAL:{enumerable:true,writable:false,configurable:false,value:"normal"},SMALL_CAPS:{enumerable:true,writable:false,configurable:false,value:"small-caps"}})});
Object.defineProperty(doodle,"FontWeight",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{NORMAL:{enumerable:true,writable:false,configurable:false,value:"normal"},BOLD:{enumerable:true,writable:false,configurable:false,value:"bold"},BOLDER:{enumerable:true,writable:false,configurable:false,value:"bolder"},LIGHTER:{enumerable:true,writable:false,configurable:false,value:"lighter"}})});
Object.defineProperty(doodle,"TextAlign",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{START:{enumerable:true,writable:false,configurable:false,value:"start"},END:{enumerable:true,writable:false,configurable:false,value:"end"},LEFT:{enumerable:true,writable:false,configurable:false,value:"left"},RIGHT:{enumerable:true,writable:false,configurable:false,value:"right"},CENTER:{enumerable:true,writable:false,configurable:false,value:"center"}})});
Object.defineProperty(doodle,"TextBaseline",{enumerable:true,writable:false,configurable:false,value:Object.create(null,{TOP:{enumerable:true,writable:false,configurable:false,value:"top"},MIDDLE:{enumerable:true,writable:false,configurable:false,value:"middle"},BOTTOM:{enumerable:true,writable:false,configurable:false,value:"bottom"},HANGING:{enumerable:true,writable:false,configurable:false,value:"hanging"},ALPHABETIC:{enumerable:true,writable:false,configurable:false,value:"alphabetic"},IDEOGRAPHIC:{enumerable:true,
writable:false,configurable:false,value:"ideographic"}})});
(function(){var c,u=doodle.utils.hex_to_rgb_str,q=doodle.FontStyle,i=doodle.FontVariant,f=doodle.FontWeight,o=doodle.TextAlign,s=doodle.TextBaseline;doodle.Text=function(j){var k=Object.create(doodle.Sprite());Object.defineProperties(k,c);Object.defineProperties(k,function(){function a(){var g=k.context||document.createElement("canvas").getContext("2d"),x,A,G=k.graphics,B=0,H=0,E=0;g.save();g.font=z+" "+h+" "+n+" "+m+"px "+e;x=g.measureText(b).width;A=m;w=g.measureText("m").width;g.restore();k.graphics.clear();
k.graphics.draw(function(J){if(t){J.fillStyle=t;J.fillRect(0,0,x,A)}J.lineWidth=r;J.textAlign=v;J.textBaseline=p;J.font=z+" "+h+" "+n+" "+m+"px "+e;if(l){J.fillStyle=l;J.fillText(b,0,0)}if(d){J.strokeStyle=d;J.strokeText(b,0,0)}});k.width=x;k.height=A;switch(p){case s.TOP:H=m-w;E=m;break;case s.MIDDLE:H=-w/2;E=w/2;break;case s.BOTTOM:H=-m;break;case s.HANGING:H=m-w;E=m;break;case s.ALPHABETIC:H=-w;break;case s.IDEOGRAPHIC:H=-m}switch(v){case o.END:B=-x;break;case o.RIGHT:B=-x;break;case o.CENTER:B=
-x/2}G.__minX=B;G.__maxX=0;G.__minY=H;G.__maxY=E}var b="",e="sans-serif",m=10,w=m,z=q.NORMAL,h=i.NORMAL,n=f.NORMAL,v=o.START,p=s.ALPHABETIC,l="#000000",d="#000000",r=1,t;return{text:{enumerable:true,configurable:false,get:function(){return b},set:function(g){b=g;a()}},font:{enumerable:true,configurable:false,get:function(){return z+" "+h+" "+n+" "+m+"px "+e},set:function(g){var x;g=g.split(" ");x=g.length;if(x===2)g.unshift(q.NORMAL,i.NORMAL,f.NORMAL);else if(x===3)g.splice(1,0,i.NORMAL,f.NORMAL);
else x===4&&g.splice(1,0,i.NORMAL);k.fontStyle=g[0];k.fontVariant=g[1];k.fontWeight=g[2];k.fontSize=g[3];k.fontFamily=g[4]}},fontFamily:{enumerable:true,configurable:false,get:function(){return e},set:function(g){e=g;a()}},fontSize:{enumerable:true,configurable:false,get:function(){return m},set:function(g){if(typeof g==="string")g=parseInt(g,10);m=g;a()}},fontStyle:{enumerable:true,configurable:false,get:function(){return z},set:function(g){z=g;a()}},fontVariant:{enumerable:true,configurable:false,
get:function(){return h},set:function(g){h=g;a()}},fontWeight:{enumerable:true,configurable:false,get:function(){return n},set:function(g){n=g;a()}},align:{enumerable:true,configurable:false,get:function(){return v},set:function(g){v=g;a()}},baseline:{enumerable:true,configurable:false,get:function(){return p},set:function(g){p=g;a()}},strokeWidth:{enumerable:true,configurable:false,get:function(){return r},set:function(g){r=g}},color:{enumerable:true,configurable:false,get:function(){return l},set:function(g){if(typeof g===
"number")g=u(g);l=g}},strokeColor:{enumerable:true,configurable:false,get:function(){return d},set:function(g){if(typeof g==="number")g=u(g);d=g}},backgroundColor:{enumerable:true,configurable:false,get:function(){return t},set:function(g){if(typeof g==="number")g=u(g);t=g}}}}());switch(arguments.length){case 1:if(typeof arguments[0]==="function"){arguments[0].call(k);j=undefined}else k.text=j}return k};c={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Text]"}}}})();
(function(){var c,u=doodle.utils.get_element,q=doodle.events.Event,i=doodle.events.Event.LOAD,f=doodle.events.Event.CHANGE;doodle.Image=function(o){var s=Object.create(doodle.Sprite());Object.defineProperties(s,c);Object.defineProperties(s,function(){function j(e){b=e;if(b.id!=="")s.id=b.id;s.width=b.width;s.height=b.height;s.graphics.draw(function(m){m.drawImage(b,0,0)});s.dispatchEvent(q(i))}function k(){if(b!==null){b=null;s.graphics.clear();s.dispatchEvent(q(f))}}function a(e){var m=u(e);if(typeof e===
"string")s.id=e;if(m.complete)j(m);else{m.onload=function(){j(m)};m.onerror=function(){throw new URIError("[object Image](imageSrc): Unable to load "+m.src);};m.onabort=function(){throw new URIError("[object Image](imageSrc): Unable to load "+m.src);}}}var b=null;return{element:{enumerable:true,configurable:false,get:function(){return b},set:function(e){e===null||e===false?k():a(e)}},src:{enumerable:true,configurable:false,get:function(){return b===null?null:b.src},set:function(e){if(e===null||e===
false)k();else{var m=new Image;m.src=encodeURI(e);a(m)}}}}}());switch(arguments.length){case 1:if(typeof arguments[0]==="function"){arguments[0].call(s);o=undefined}else if(typeof o!=="string")s.element=o;else if(typeof o==="string"&&o[0]==="#")s.element=o;else s.src=o}return s};c={toString:{enumerable:false,writable:false,configurable:false,value:function(){return"[object Image]"}}}})();
